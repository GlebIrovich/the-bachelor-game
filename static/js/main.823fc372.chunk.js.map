{"version":3,"sources":["models/characters.ts","models/common.ts","models/index.ts","models/overlays.ts","models/games.ts","helpers/useWindowSize.ts","components/Confetti/index.tsx","context/actions.ts","context/reducer.ts","context/OverlaysContext.tsx","containers/Overlay/index.tsx","containers/Overlay/OverlayWidget.tsx","containers/Overlay/CharacterDescriptionOverlay.tsx","containers/Overlay/GameCompletedOverlay.tsx","queries/mutations.ts","queries/queries.ts","queries/subscriptions.ts","containers/Overlay/JoinGameOverlay.tsx","services/localStorageService.ts","containers/Overlay/LoginOverlay.tsx","constants/styles.ts","containers/Routes/paths.ts","containers/Overlay/SelectCharacterOverlay.tsx","containers/Overlay/SignUpOverlay.tsx","containers/Overlay/SkillOverlay.tsx","containers/AuthorizedRoute/index.tsx","components/Navbar/index.tsx","components/PageLayout/index.tsx","renderProps/UserAndGame.tsx","helpers/convertActiveUser.ts","containers/BarStepsWidget/index.tsx","containers/Map/index.tsx","config.ts","containers/BarPage/index.tsx","containers/PlayerInfo/index.tsx","components/SkillIcon/index.tsx","containers/SkillsContainer/index.tsx","components/CharacterCard/avatars/dummy.svg","components/CharacterCard/index.tsx","containers/Characters/index.tsx","containers/GameScreen/TabContainer.tsx","containers/GameScreen/GameScreenWidget.tsx","containers/GameScreen/index.tsx","containers/MainView/Main.tsx","containers/Routes/index.tsx","App.tsx","client/index.ts","serviceWorker.js","index.tsx"],"names":["CharacterType","characterTitleMap","_characterTitleMap","Object","_Users_gleb_Documents_PROJECTS_kekopolia_frontend_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","PALADIN","THIEF","WIZARD","characterList","characterDescriptionMap","_characterDescription","skillTypeMap","_skillTypeMap","SkillType","ARTEFACT","ATTACK","DEFENCE","skillDescriptionMap","_skillDescriptionMap","_CharacterType$PALADI","_CharacterType$THIEF","_CharacterType$WIZARD","JustifyContent","_characters__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","d","__webpack_exports__","_overlays__WEBPACK_IMPORTED_MODULE_2__","_users__WEBPACK_IMPORTED_MODULE_3__","o","_games__WEBPACK_IMPORTED_MODULE_4__","OverlayKey","OverlayActionType","SkillStatus","useWindowSize","window","width","innerWidth","height","innerHeight","StyledConfetti","styled","Confetti","_templateObject","_useWindowSize","react_default","a","createElement","hideOverlay","type","HIDE","payload","undefined","showOverlay","overlay","props","SHOW","reducer","state","action","objectSpread","initialState","OverlayContext","createContext","useOverlayContext","useContext","StyledOverlay","div","Overlay_templateObject","Background","_templateObject2","Overlay","_ref","children","_useOverlayContext","_useOverlayContext2","slicedToArray","dispatch","handleKeyDown","e","key","useEffect","addEventListener","Fragment","Paper","OverlayWidget_templateObject","Title","Typography","OverlayWidget_templateObject2","Message","_templateObject3","StyledActionContainer","_templateObject4","StyledCancelButton","Button","_templateObject5","OverlayWidget","title","actions","message","content","onCancel","secondaryActions","hideCancelAction","OverlayWidget_StyledOverlay","index_es","container","item","xs","justify","color","variant","onClick","fullWidth","CharacterDescriptionOverlay","character","containers_Overlay","Overlay_OverlayWidget","GameCompletedOverlay","SET_ACTIVE_GAME","gql","mutations_templateObject","SET_CHARACTER","mutations_templateObject2","INSERT_NEW_USER","mutations_templateObject3","mutations_templateObject4","GET_USER_BY_EMAIL","queries_templateObject","LOGIN","queries_templateObject2","GET_GAME","queries_templateObject3","GET_GAME_BY_ID","queries_templateObject4","GET_ACTIVE_USERS","queries_templateObject5","_templateObject6","InputField","PLAYERS_SUBSCRIPTION","subscriptions_templateObject","getUser","data","localStorage","getItem","JSON","parse","setUser","user","setItem","stringify","StyledProgress","CircularProgress","JoinGameOverlay_templateObject","withRouter","history","_useState","useState","defineProperty","TITLE","_useState2","values","titleChange","_useQuery","useQuery","variables","error","loading","setActiveGame","useMutation","games","length","userId","id","gameId","then","_ref2","mutationData","update_users","returning","active_game","SELECT_CHARACTER","disabled","size","noValidate","autoComplete","label","value","onChange","event","currentTarget","toLocaleLowerCase","margin","LoginOverlay_templateObject","withApollo","_useState3","client","EMAIL","PASSWORD","inputValues","changeValue","_useState4","_useState5","setLoading","_useState6","_useState7","setError","handleChange","inputName","push","query","email","password","users","LoginOverlay_StyledProgress","SIGN_UP","autoFocus","gamePath","gameTitle","concat","SelectCharacterOverlay_templateObject","selectCharacter","gameData","console","log","setCharacter","clearStore","SelectCharacterOverlay_StyledProgress","target","inputProps","name","filter","char","map","includes","UsersQuery","Query","InsertUserMutation","Mutation","SignUpOverlay","USERNAME","inputError","setInputError","inputIsEmpty","field","SignUpOverlay_UsersQuery","SignUpOverlay_InsertUserMutation","mutation","username","insertUser","response","insert_users","required","UpdateSkillStatusMutation","SkillOverlay","skill","skillStatus","skillType","currentUserId","isCreator","isCharacterOwner","handleButtonClick","fn","SkillOverlay_UpdateSkillStatusMutation","mutations_templateObject5","updateSkillStatus","READY","USED","AuthorizedRoute","RouteComponent","component","rest","objectWithoutProperties","react_router","assign","render","to","StyledToolbar","Toolbar","Navbar_templateObject","StyledAppBar","AppBar","Navbar_templateObject2","_React$useState","React","_React$useState2","open","toggleOpen","elementRef","useRef","handleClose","current","contains","position","buttonRef","aria-label","aria-owns","aria-haspopup","Menu_default","anchorEl","transition","TransitionProps","placement","style","transformOrigin","onClickAway","PageLayout","components_Navbar","StyledLoadingContainer","UserAndGame_templateObject","GameQuery","UserAndGame","_this","this","components_PageLayout","UserAndGame_GameQuery","UserAndGame_UsersQuery","players","usersData","usersLoading","subscribeToMore","game_id","_ref$user","restUser","player","user_id","game","subscribeToPlayers","document","updateQuery","prev","_ref3","subscriptionData","Component","StepContainer","BarStepsWidget_templateObject","StyledBarAddress","BarStepsWidget_templateObject2","calculateContainerHeight","BarStepsWidget","activeStep","setActiveStep","_React$useState3","_React$useState4","containerHeight","setHeight","steps","handleNext","prevActiveStep","handleBack","handleWin","GAME_COMPLETED","orientation","index","step","getStepContent","StyledGeolocationControls","GeolocateControl","Map_templateObject","initialLocation","latitude","longitude","zoom","StyledMapContainer","Map_templateObject2","Map","disableTabSwipe","viewport","handleViewportChange","componentWidth","setWidth","esm","onTouchStart","onTouchEnd","mapboxApiAccessToken","onViewportChange","positionOptions","enableHighAccuracy","trackUserLocation","BarPage","containers_Map","containers_BarStepsWidget","StyledContainer","Grid","PlayerInfo_templateObject","StyledUsername","PlayerInfo_templateObject2","PlayerInfo","StyledSkill","Avatar","SkillIcon_templateObject","skillstatus","SkillIcon","SkillsContainer_templateObject","SkillsContainer","onSkillClick","SkillsContainer_StyledContainer","components_SkillIcon","attack","defence","artefact","_extends","i","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","dummy_ref2","cx","cy","r","_ref4","stroke","strokeWidth","fill","fillRule","transform","xlinkHref","mask","x","y","fillOpacity","opacity","rx","ry","filterUnits","dx","dy","in","result","dummy_SvgDummy","svgRef","viewBox","ref","ForwardRef","forwardRef","p","StyledAvatar","CharacterCard_templateObject","StyledCard","CharacterCard_templateObject2","CharacterCard","wrap","spacing","alignContent","CHARACTER_DESCRIPTION","zeroMinWidth","containers_PlayerInfo","containers_SkillsContainer","overlayProps","SKILL_DESCRIPTION","align","score","Characters","components_CharacterCard","TabContainer","tabCount","padding","StyledBottomNavigation","BottomNavigation","GameScreenWidget_templateObject","GameScreenWidget","_this$props","swipeDisabled","tabIndex","handleTabIndexChange","creator","lib_default","onChangeIndex","containers_BarPage","TabContainer_TabContainer","containers_Characters","showLabels","icon","LocationOn_default","FaceRounded_default","GameScreen_templateObject","GameScreen","setState","_this2","UserAndGame_UserAndGame","params","GameScreen_GameScreenWidget","StyledButton","Main_templateObject","loginRequired","className","Main_GameQuery","JOIN_GAME","Routes","exact","path","Main","MainView_Main","containers_AuthorizedRoute","overlayMap","_overlayMap","JoinGameOverlay","SelectCharacterOverlay","LoginOverlay","App","_useOverlayContext2$","OverlayComponent","react_router_dom","basename","containers_Routes","httpLink","HttpLink","uri","wsLink","WebSocketLink","options","reconnect","link","split","_getMainDefinition","getMainDefinition","kind","operation","ApolloClient","cache","InMemoryCache","Boolean","location","hostname","match","ReactDOM","ApolloContext","react_apollo_esm","Provider","useReducer","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.823fc372.chunk.js","sourcesContent":["import { SkillType } from './games';\n\nexport enum CharacterType {\n  THIEF = 'thief',\n  WIZARD = 'wizard',\n  PALADIN = 'paladin',\n}\n\nexport const characterTitleMap = {\n  [CharacterType.PALADIN]: 'Рыцарь',\n  [CharacterType.THIEF]: 'Авантюрист',\n  [CharacterType.WIZARD]: 'Маг',\n}\n\nexport const characterList = [\n  CharacterType.PALADIN,\n  CharacterType.THIEF,\n  CharacterType.WIZARD,\n]\n\nexport const characterDescriptionMap = {\n  [CharacterType.PALADIN]: `\n    Рыцарь ставит свою честь превыше всего. Он идет на все ради подвигов и славы. На рыцаря возложена священная миссия.\n    Он охраняет грааль, доверенный ему самим папой. Чьим, правда, не уточняется.\n    Облаченный в тяжелую броню, рыцарь не может передвигаться без своей пони-лошадки.\n    Игрок с классом РЫЦАРЬ должен передвигаться только на лошадке.`,\n  [CharacterType.THIEF]: `\n    Во всем полагается на удачу. Не может сам выбрать напиток, все решают кубики.\n    Авантюрист не может отказать себе в удовольствии взять вещь, которая плохо лежит.\n    В конце игры авантюрист получает по 1 очку за каждый уникальный украденный из баров подстаканник для пива.`,\n  [CharacterType.WIZARD]: `\n    Ученики магических школ научились контролировать потоки энергии, окружающие наш мир.\n    Черпая знания из древних свитков, маги стали непрезойденными мастерами заклинаний, лекарями и опасными противниками. `,\n}\n\nexport const skillTypeMap = {\n  [SkillType.ARTEFACT]: 'Способность Артефакта',\n  [SkillType.ATTACK]: 'Атакующая способность',\n  [SkillType.DEFENCE]: 'Защитная способность',\n}\n\nexport const skillDescriptionMap = {\n  [CharacterType.PALADIN] : {\n    [SkillType.ARTEFACT]: 'Способность Артефакта',\n    [SkillType.ATTACK]: 'Атакующая способность',\n    [SkillType.DEFENCE]: 'Защитная способность',\n  },\n  [CharacterType.THIEF] : {\n    [SkillType.ARTEFACT]: 'Способность Артефакта',\n    [SkillType.ATTACK]: 'Атакующая способность',\n    [SkillType.DEFENCE]: 'Защитная способность',\n  },\n  [CharacterType.WIZARD] : {\n    [SkillType.ARTEFACT]: 'Способность Артефакта',\n    [SkillType.ATTACK]: 'Атакующая способность',\n    [SkillType.DEFENCE]: 'Защитная способность',\n  }\n}","import { Dispatch } from 'react';\n\nexport interface OverlayProps {\n  [key: string]: any;\n}\n\nexport interface GenericAction<T, P> {\n  type: T;\n  payload: P;\n  props?: OverlayProps,\n}\n\nexport type GenericReducer<T, P> = [T, Dispatch<P>]\n\nexport enum JustifyContent {\n  FLEX_END = 'flex-end',\n  SPACE_BETWEEN = 'space-between',\n}","export * from './characters';\nexport * from './common';\nexport * from './overlays';\nexport * from './users';\nexport * from './games';","import { GenericAction, OverlayProps } from './common';\n\nexport enum OverlayKey {\n  GAME_COMPLETED = 'gameCompleted',\n  JOIN_GAME = 'gameJoin',\n  SELECT_CHARACTER = 'selectCharacter',\n  LOGIN = 'login',\n  SIGN_UP = 'signUp',\n  CHARACTER_DESCRIPTION = 'characterDescription',\n  SKILL_DESCRIPTION = 'skillDescription',\n}\n\nexport interface OverlayContextState {\n  overlay?: OverlayKey;\n  props?: OverlayProps;\n}\n\nexport enum OverlayActionType {\n  SHOW = 'show',\n  HIDE = 'hide'\n}\n\nexport type Action = GenericAction<OverlayActionType, OverlayKey | undefined>;","import { UserId } from './users';\n\nexport type GameId = string;\n\nexport interface Game {\n  id: GameId;\n  title: string;\n  modified: number; \n  game_data: GameData;\n  creator: UserId;\n}\n\nexport enum SkillStatus {\n  USED = 'used',\n  READY = 'ready',\n}\n\nexport enum SkillType {\n  ATTACK = 'attack',\n  DEFENCE = 'defence',\n  ARTEFACT = 'artefact',\n}\n\nexport interface Player {\n  game_id: GameId;\n  user_id: UserId;\n  score: number;\n  attack: SkillStatus;\n  defence: SkillStatus;\n  artefact: SkillStatus;\n}\n\nexport interface Level {\n  title: string;\n  address: string;\n  id: string;\n}\n\nexport interface GameData {\n  levels: Level[];\n  activeLevel: string; // Level Id;\n}","export const useWindowSize = () => {\n  if (window) {\n    return {\n      width: window.innerWidth,\n      height: window.innerHeight,\n    }\n  }\n  return {\n    width: 300,\n    height: 200,\n  }\n}","import React from 'react';\nimport Confetti from 'react-confetti';\nimport styled from 'styled-components';\n\nimport { useWindowSize } from '../../helpers/useWindowSize';\n\nconst StyledConfetti = styled(Confetti)`\n  pointer-events: none;\n`;\n\nexport default () => {\n  const { width, height } = useWindowSize()\n  return (\n    <StyledConfetti\n      width={width}\n      height={height}\n    />\n  )\n}","import { OverlayProps } from '../models';\nimport { Action as OverlayAction, OverlayActionType, OverlayKey } from '../models/overlays';\n\nexport const hideOverlay = (): OverlayAction => ({\n  type: OverlayActionType.HIDE,\n  payload: undefined,\n})\n\nexport const showOverlay = (overlay: OverlayKey, props?: OverlayProps): OverlayAction => ({\n  type: OverlayActionType.SHOW,\n  payload: overlay,\n  props,\n})","import { Action, OverlayActionType, OverlayContextState } from '../models/overlays';\n\nexport const reducer = (state: OverlayContextState, action: Action): OverlayContextState => {\n  switch (action.type) {\n    case OverlayActionType.SHOW:\n      return {\n        ...state,\n        overlay: action.payload,\n        props: action.props,\n      };\n    \n    case OverlayActionType.HIDE:\n      return {\n        ...state,\n        overlay: undefined,\n        props: undefined,\n      };\n      \n    default:\n      return state;\n  }\n};","import React, { createContext, FC, useContext, useReducer } from 'react';\n\nimport { GenericReducer } from '../models/common';\nimport { Action as OverlayAction, OverlayContextState } from '../models/overlays';\nimport { reducer } from './reducer';\n\nconst initialState: OverlayContextState = {}\n\ntype OverlayHook = GenericReducer<OverlayContextState, OverlayAction>\n\nexport const OverlayContext = createContext<any>({});\n\nexport const OverlayProvider: FC = ({children}) => (\n  <OverlayContext.Provider value={useReducer(reducer, initialState)} key=\"overlay\">\n    {children}\n  </OverlayContext.Provider>\n)\n\nexport const useOverlayContext = () => useContext<OverlayHook>(OverlayContext);\n","import React, { FC, ReactNode, useEffect } from 'react';\nimport styled from 'styled-components';\n\nimport { hideOverlay } from '../../context/actions';\nimport { useOverlayContext } from '../../context/OverlaysContext';\n\nconst StyledOverlay = styled.div`\n  position: absolute;\n  top: 35%;\n  width: 100%;\n  margin: 0 auto;\n`;\n\nconst Background = styled.div`\n  position: absolute;\n  top: 0;\n  opacity: 0.25;\n  height: 100%;\n  width: 100%;\n  background: black;\n`;\n\nconst Escape = 'Escape';\n\nconst Overlay: FC = ({children}) => {\n  const [_state, dispatch] = useOverlayContext()\n  const handleKeyDown = (e: KeyboardEvent) => {\n    if (e.key === Escape) {\n      dispatch(hideOverlay());\n    }\n  }\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown)\n  })\n\n  return (\n    <React.Fragment>\n      <Background/>\n      <StyledOverlay>\n        {children}\n      </StyledOverlay>\n    </React.Fragment>\n  )\n}\n\nexport default Overlay\n","import { Button, Grid, Paper, Typography } from '@material-ui/core';\nimport React, { FC, ReactNode } from 'react';\nimport styled from 'styled-components';\n\nimport { hideOverlay } from '../../context/actions';\nimport { useOverlayContext } from '../../context/OverlaysContext';\n\nconst StyledOverlay = styled(Paper)`\n  width: 20em;\n  padding: 1em;\n  margin: 0 auto;\n`;\n\nconst Title = styled(Typography)`\n  font-size: 1.5em !important;\n  margin-bottom: 0.5em !important;\n`;\n\nconst Message = styled(Typography)`\n  margin-bottom: 0.5em !important;\n`;\n\nconst StyledActionContainer = styled.div`\n  margin-top: 1em;\n  width: 100%;\n  > button {\n    margin-top: 0.8em;\n  }\n`;\n\nconst StyledCancelButton = styled(Button)`\n  margin-right: 1em !important;\n`;\n\ninterface Props {\n  title: string;\n  actions: ReactNode;\n  secondaryActions?: ReactNode;\n  message?: string;\n  content?: ReactNode;\n  onCancel?: () => void;\n  hideCancelAction?: boolean;\n}\n\nconst OverlayWidget: FC<Props> = ({title, actions, message, content, onCancel, secondaryActions, hideCancelAction}) => {\n  const [, dispatch] = useOverlayContext();\n  function handleCancel() {\n    if (onCancel) onCancel();\n    dispatch(hideOverlay());\n  }\n  return (\n    <StyledOverlay>\n      <Grid container>\n        <Grid item>\n          <Title>{title}</Title>\n          { message && <Message>{message}</Message>}\n        </Grid>\n        <Grid item xs={12}>\n          {content}\n        </Grid>\n      </Grid>\n      <Grid container justify=\"flex-end\">\n        <StyledActionContainer>\n          {actions}\n          {secondaryActions}\n          {!hideCancelAction && (\n            <StyledCancelButton color=\"secondary\" variant=\"outlined\" onClick={handleCancel} fullWidth>\n              Отмена\n            </StyledCancelButton>\n          )}\n        </StyledActionContainer>\n      </Grid>\n    </StyledOverlay>\n  )\n}\n\nexport default OverlayWidget\n","import { Button, Typography } from '@material-ui/core';\nimport React, { FC } from 'react';\n\nimport Overlay from '.';\nimport { hideOverlay } from '../../context/actions';\nimport { useOverlayContext } from '../../context/OverlaysContext';\nimport { characterDescriptionMap, characterTitleMap, CharacterType } from '../../models';\nimport OverlayWidget from './OverlayWidget';\n\ninterface Props {\n  character: CharacterType;\n}\n\nconst CharacterDescriptionOverlay: FC<Props> = ({character}) => {\n  const [_state, dispatch] = useOverlayContext();\n  return (\n    <Overlay>\n      <OverlayWidget\n        hideCancelAction\n        title={characterTitleMap[character]}\n        actions={\n          <Button\n            fullWidth\n            onClick={() => dispatch(hideOverlay())}\n            variant=\"contained\"\n            color=\"primary\"\n          >\n            Ок\n          </Button>\n        }\n        content={\n          <Typography>\n            {characterDescriptionMap[character]}\n          </Typography>\n        }\n      />\n    </Overlay>\n  )\n}\n\nexport default CharacterDescriptionOverlay\n","import { Button } from '@material-ui/core';\nimport React from 'react';\n\nimport Overlay from '.';\nimport { hideOverlay } from '../../context/actions';\nimport { useOverlayContext } from '../../context/OverlaysContext';\nimport OverlayWidget from './OverlayWidget';\n\nconst GameCompletedOverlay = () => {\n  const [_state, dispatch] = useOverlayContext();\n  return (\n    <Overlay>\n      <OverlayWidget\n        title=\"Победа!\"\n        message=\"Ура! Мы это сделали!\"\n        actions={\n          <Button\n            onClick={() => dispatch(hideOverlay())}\n            variant=\"contained\"\n            color=\"primary\"\n          >\n            Готово\n          </Button>\n        }\n      />\n    </Overlay>\n  )\n}\n\nexport default GameCompletedOverlay\n","import gql from 'graphql-tag';\nimport { OperationVariables } from 'react-apollo';\n\nimport { GameData, GameId, Player, SkillStatus, SkillType, User, UserId } from '../models';\n\n\nexport interface SetActiveGameQueryVariables extends OperationVariables {\n  userId: string,\n  gameId: string;\n}\n\nexport interface SetActiveGameData {\n  insert_players: {\n    returning: [Player];\n  };\n  update_users: {\n    returning: [User];\n  };\n}\n\nexport const SET_ACTIVE_GAME = gql`\n  mutation setActiveGame($userId: uuid!, $gameId: uuid!){\n    update_users(where: {id: {_eq: $userId}}, _set: {active_game: $gameId}) {\n      returning {\n        active_game\n        character\n        email\n        id\n        username\n      }\n    }\n    insert_players(objects: {user_id: $userId, game_id: $gameId}, on_conflict: {update_columns: [defence, attack, artefact, score], constraint: players_pkey}) {\n      returning {\n        user_id\n        score\n        defence\n        attack\n        artefact\n      }\n    }\n  }\n`;\n\nexport interface SetCharacterQueryVariables extends OperationVariables {\n  userId: string,\n  character: string;\n}\n\nexport const SET_CHARACTER = gql`\n  mutation setActiveGame($userId: uuid!, $character: String!){\n    update_users(where: {id: {_eq: $userId}}, _set: {character: $character}){\n      returning {\n        character\n      }\n    }\n  }\n`;\n\nexport interface UpdateGameDataMutationVariables extends OperationVariables {\n  gameId: GameId;\n  gameData: GameData;\n}\n\nexport const UPDATE_GAME_DATA = gql`\n  mutation updateGameData($gameId: uuid!, $gameData: json!){\n    update_games(where: {id: {_eq: $gameId}}, _set: {game_data: $gameData}) {\n      returning {\n        creator\n        game_data\n        id\n        modified\n        title\n      }\n    }\n  }\n`;\n\nexport interface InsertNewUserMutationVariables extends OperationVariables {\n  email: string,\n  username: string,\n  password: string;\n}\n\nexport const INSERT_NEW_USER = gql`\n  mutation insertNewUser($email: String!, $password: String!, $username: String!) {\n  insert_users(objects: {email: $email, password: $password, username: $username}) {\n    returning {\n      id\n      email\n      username\n    }\n  }\n}\n`;\n\nexport interface UpdateSkillStatusMutationVariables extends OperationVariables {\n  userId: UserId;\n  skillStatus: SkillStatus;\n}\n\nexport const UPDATE_SKILL_STATUS = (skill: SkillType) => gql`\n  mutation updateSkillStatus($userId: uuid!, $skillStatus: String!) {\n    update_players(where: {user_id: {_eq: $userId}}, _set: {${skill}: $skillStatus}) {\n      returning {\n        user_id\n      }\n    }\n  }\n`;","import gql from 'graphql-tag';\nimport { OperationVariables } from 'react-apollo';\n\nimport { GameId, Player, User, UserId } from '../models';\n\nexport interface GetUserByEmailQueryVariables extends OperationVariables {\n  email: string,\n}\n\nexport const GET_USER_BY_EMAIL = gql`\n  query getUserByEmail($email: String!){\n    users(where: {email: {_eq: $email}}) {\n      id\n    }\n  }\n`;\n\nexport interface LoginQueryVariables extends OperationVariables {\n  email: string,\n  password: string;\n}\n\nexport const LOGIN = gql`\n  query loginUser($email: String!, $password: String!){\n    users(where: {_and: {email: {_eq: $email}, password: {_eq: $password}}}) {\n      username\n      id\n      character\n      email\n      active_game\n    }\n  }\n`;\n\nexport interface GetGameQueryVariables extends OperationVariables {\n  title: string;\n}\n\nexport const GET_GAME = gql`\n  query getGame($title: String!){\n    games(where: {title: {_eq: $title}}) {\n      creator\n      id\n      modified\n      title\n      game_data\n    }\n  }\n`;\n\nexport interface GetGameByIdQueryVariables extends OperationVariables {\n  gameId?: GameId;\n}\n\nexport const GET_GAME_BY_ID = gql`\n  query getGameById($gameId: uuid!){\n    games(where: {id: {_eq: $gameId}}) {\n      creator\n      id\n      modified\n      title\n      game_data\n    }\n  }\n`;\n\n\nexport interface GetUserQueryVariables extends OperationVariables {\n  userId: UserId,\n}\n\nexport const GET_USER = gql`\n  query getUser($userId: uuid!){\n    users(where: {id: {_eq: $userId}}) {\n      active_game\n      character\n      email\n      id\n      modified\n      username\n    }\n  }\n`;\n\nexport interface GetActiveUsersQueryVariables extends OperationVariables {\n  gameId: GameId;\n}\n\nexport interface PlayerRelation extends Player {\n  user: User;\n}\n\nexport interface GetActiveUsersData {\n  players: PlayerRelation[];\n}\n\nexport const GET_ACTIVE_USERS = gql`\n  query getUser($gameId: uuid!){\n    players(where: {game_id: {_eq: $gameId}}) {\n      user_id\n      artefact\n      attack\n      defence\n      game_id\n      score\n      user {\n        character\n        email\n        id\n        username\n        active_game\n      }\n    }\n  }\n`;\n\n","import { gql, OperationVariables } from 'apollo-boost';\n\nimport { GameId, Player } from '../models';\n\nexport interface SubscribeToPlayersVariables extends OperationVariables {\n  gameId: GameId;\n}\n\nexport interface SubscribeToPlayersData {\n  players: Player[];\n}\n\nexport const PLAYERS_SUBSCRIPTION = gql`\n  subscription onPlayersChanged($gameId: uuid!) {\n    players(where: {game_id: {_eq: $gameId}}) {\n      user_id\n      artefact\n      attack\n      defence\n      game_id\n      score\n      user {\n        character\n        email\n        id\n        username\n        active_game\n      }\n    }\n  }\n`;","import { Button, CircularProgress, TextField } from '@material-ui/core';\nimport React, { ChangeEvent, FC, useState } from 'react';\nimport { useMutation, useQuery } from 'react-apollo-hooks';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport styled from 'styled-components';\n\nimport Overlay from '.';\nimport { LOADING_ICON_SIZE } from '../../constants/styles';\nimport { showOverlay } from '../../context/actions';\nimport { useOverlayContext } from '../../context/OverlaysContext';\nimport { Game, OverlayKey } from '../../models';\nimport {\n  GET_GAME,\n  GetGameQueryVariables,\n  SET_ACTIVE_GAME,\n  SetActiveGameData,\n  SetActiveGameQueryVariables,\n} from '../../queries';\nimport { getUser, setUser } from '../../services';\nimport OverlayWidget from './OverlayWidget';\n\nenum InputField {\n  TITLE = 'title',\n}\n\nconst StyledProgress = styled(CircularProgress)`\n  margin-right: 0.5em !important;\n`;\n\nconst JoinGameOverlay: FC<RouteComponentProps> = ({history}) => {\n  const [, dispatch] = useOverlayContext();\n  const [values, titleChange] = useState({[InputField.TITLE]: ''})\n  const handleTitleChange = (field: InputField) => (event: ChangeEvent<HTMLInputElement>) => {\n    titleChange({...values, [InputField.TITLE]: event.currentTarget.value.toLocaleLowerCase()})\n  }\n\n  const {data, error, loading} = useQuery<{games: Game[]}, GetGameQueryVariables>(GET_GAME, {variables: {title: values[InputField.TITLE]}})\n  const setActiveGame = useMutation<SetActiveGameData, SetActiveGameQueryVariables>(SET_ACTIVE_GAME);\n\n  function isButtonDisabled() {\n    if (data && data.games.length === 1) return false;\n    return true;\n  }\n  const user = getUser();\n  function handleJoin() {\n    \n    if (data && data.games.length === 1 && user) {\n      \n      setActiveGame({variables: {userId: user.id, gameId: data.games[0].id}})\n        .then(({data: mutationData}: {data: SetActiveGameData}) => {\n          if(mutationData\n              && mutationData.update_users\n              && mutationData.update_users.returning) {\n            setUser({...user, active_game: mutationData.update_users.returning[0].active_game});\n\n            dispatch(showOverlay(OverlayKey.SELECT_CHARACTER));\n          }\n        })\n    }\n  }\n  \n  return (\n    <Overlay>\n      <OverlayWidget\n        title=\"Поиск игры\"\n        actions={\n          <Button\n            onClick={handleJoin}\n            color=\"primary\"\n            disabled={loading || !!error || isButtonDisabled()}\n          >\n            {loading && <StyledProgress size={LOADING_ICON_SIZE}/>}\n            Присоединиться\n          </Button>\n        }\n        content={\n          <form noValidate autoComplete=\"off\">\n            <TextField\n              fullWidth\n              label=\"Название игры\"\n              error={!!error}\n              value={values[InputField.TITLE]}\n              onChange={handleTitleChange(InputField.TITLE)}\n              margin=\"normal\"\n            />\n          </form>\n        }\n      />\n    </Overlay>\n  )\n}\n\nexport default withRouter(JoinGameOverlay)\n","import { User } from '../models';\n\nconst USER = 'user';\n\nexport const getUser = (): User | undefined => {\n  const data = window.localStorage.getItem(USER);\n  return data ? JSON.parse(data) : undefined;\n}\n\nexport const setUser = (user: User) => window.localStorage.setItem(USER, JSON.stringify(user));\n\nexport const removeUser = () => window.localStorage.removeItem(USER);","import { Button, CircularProgress, TextField } from '@material-ui/core';\nimport React, { ChangeEvent, FC, useState } from 'react';\nimport { withApollo, WithApolloClient } from 'react-apollo';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport styled from 'styled-components';\n\nimport Overlay from '.';\nimport { LOADING_ICON_SIZE } from '../../constants/styles';\nimport { hideOverlay, showOverlay } from '../../context/actions';\nimport { useOverlayContext } from '../../context/OverlaysContext';\nimport { OverlayKey, User } from '../../models';\nimport { LOGIN, LoginQueryVariables } from '../../queries';\nimport { setUser } from '../../services';\nimport OverlayWidget from './OverlayWidget';\n\nenum InputField {\n  USERNAME = 'username',\n  EMAIL = 'email',\n  PASSWORD = 'password',\n}\n\nconst StyledProgress = styled(CircularProgress)`\n  margin-right: 0.5em !important;\n`;\n\nconst LoginOverlay: FC<WithApolloClient<{}> & RouteComponentProps> = ({client, history}) => {\n  const [inputValues, changeValue] = useState({\n    [InputField.EMAIL]: '',\n    [InputField.PASSWORD]: '',\n  });\n  const [, dispatch] = useOverlayContext();\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(false)\n\n\n  function login() {\n    setLoading(true)\n    client.query<{users: User[]}, LoginQueryVariables>({\n      query: LOGIN,\n      variables: {\n        email: inputValues[InputField.EMAIL].toLocaleLowerCase(),\n        password: inputValues[InputField.PASSWORD],\n      } \n    }).then(({data: {users}}) => {\n      setLoading(false);\n      if(users.length) {\n        setUser(users[0]);\n        dispatch(hideOverlay())\n      } else {\n        setError(true);\n      }\n    })\n  }\n\n  const handleChange = (inputName: InputField) => (event: ChangeEvent<HTMLInputElement>) => {\n    changeValue({ ...inputValues, [inputName]: event.currentTarget.value })\n  }\n\n  function signUp() {\n    dispatch(showOverlay(OverlayKey.SIGN_UP));\n  }\n  \n  return (\n    <Overlay>\n      <OverlayWidget\n        title=\"Аккаунт\"\n        message=\"Войди в систему\"\n        onCancel={() => history.push('/')}\n        actions={\n          <Button variant=\"contained\" color=\"primary\" fullWidth onClick={login}>\n            {loading && <StyledProgress size={LOADING_ICON_SIZE}/>}\n            Войти\n          </Button>\n        }\n        secondaryActions={\n          <Button variant=\"outlined\" color=\"primary\" fullWidth onClick={signUp}>\n            Зарегистрироваться\n          </Button>\n        }\n        content={\n          <form noValidate autoComplete=\"off\">\n            <TextField\n              fullWidth\n              autoFocus\n              error={error}\n              label={InputField.EMAIL}\n              value={inputValues[InputField.EMAIL]}\n              onChange={handleChange(InputField.EMAIL)}\n              margin=\"normal\"\n            />\n            <TextField\n              fullWidth\n              error={error}\n              label={InputField.PASSWORD}\n              value={inputValues[InputField.PASSWORD]}\n              onChange={handleChange(InputField.PASSWORD)}\n              type=\"password\"\n              margin=\"normal\"\n            />\n          </form>\n        }\n      />\n    </Overlay>\n  )\n}\n\nexport default withRouter(withApollo(LoginOverlay))\n","export const DEFAULT_MAP_HEIGHT_PX = 350;\nexport const HEADER_HEIGHT_PX = 48;\nexport const FOOTER_HEIGHT_PX = 56;\nexport const LOADING_ICON_SIZE = '1em';\n","export function gamePath(gameTitle: string) {\n  return `/game/${gameTitle}`\n}\n","import { Button, CircularProgress, MenuItem, Select } from '@material-ui/core';\nimport React, { ChangeEvent, FC, useState } from 'react';\nimport { withApollo, WithApolloClient } from 'react-apollo';\nimport { useMutation, useQuery } from 'react-apollo-hooks';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport styled from 'styled-components';\n\nimport Overlay from '.';\nimport { hideOverlay } from '../../context/actions';\nimport { useOverlayContext } from '../../context/OverlaysContext';\nimport { characterList, characterTitleMap, CharacterType, Game, User } from '../../models';\nimport {\n  GET_ACTIVE_USERS,\n  GET_GAME_BY_ID,\n  GetActiveUsersQueryVariables,\n  GetGameByIdQueryVariables,\n  SET_CHARACTER,\n  SetCharacterQueryVariables,\n} from '../../queries';\nimport { getUser, setUser } from '../../services';\nimport { gamePath } from '../Routes/paths';\nimport OverlayWidget from './OverlayWidget';\n\nconst StyledProgress = styled(CircularProgress)`\n  margin-right: 0.5em !important;\n`;\n\nconst SelectCharacterOverlay: FC<RouteComponentProps & WithApolloClient<{}>> = ({history, client}) => {\n  const [_state, dispatch] = useOverlayContext();\n  const [character, selectCharacter] = useState<CharacterType | undefined>();\n  const user = getUser()!;\n\n  function handleChange(event: ChangeEvent<HTMLSelectElement>) {\n    selectCharacter(event.target.value as any);\n  }\n\n  const {data, error, loading} = useQuery<{users: Array<User>}, GetActiveUsersQueryVariables>(GET_ACTIVE_USERS, {variables: {gameId: user.active_game!}})\n  const {data: gameData} = useQuery<{games: [Game]}, GetGameByIdQueryVariables>(GET_GAME_BY_ID, {variables: {gameId: user.active_game!}})\n  console.log(data, gameData);\n  const setCharacter = useMutation<User[], SetCharacterQueryVariables>(SET_CHARACTER)\n  function handleCharacterSelect() {\n    if (character) {\n      setCharacter({variables: {userId: user.id, character}})\n        .then(({data}: {data: {update_users: {returning: [User]}}}) => {\n          console.log(data, gameData);\n          if(data && data.update_users && data.update_users.returning && gameData && gameData.games && gameData.games.length) {\n            setUser({...user, character: data.update_users.returning[0].character});\n            client.clearStore().then(() => history.push(gamePath(gameData.games[0].title)));\n          }\n          dispatch(hideOverlay())\n        })\n    }\n  }\n  \n  return (\n    <Overlay>\n      <OverlayWidget\n        title=\"Выбор класса\"\n        message=\"Выбери класс персонажа\"\n        actions={\n          <Button\n            color=\"primary\"\n            disabled={loading || !!error || !character}\n            onClick={handleCharacterSelect}\n          >\n            {loading && <StyledProgress size=\"1em\"/>}\n            Погнали!\n          </Button>\n        }\n        content={\n          <form autoComplete=\"off\">\n            <Select\n              fullWidth\n              value={character || ''}\n              onChange={handleChange}\n              inputProps={{\n                name: 'age',\n                id: 'age-simple',\n              }}\n            >\n              <MenuItem value=\"\" key=\"none\">\n                <em>None</em>\n              </MenuItem>\n                {\n                  !loading && data && characterList\n                    .filter(char => !data.users.map(user => user.character).includes(char))\n                    .map((char) => <MenuItem value={char} key={char}>{characterTitleMap[char]}</MenuItem>)\n                }\n            </Select>\n          </form>\n        }\n      />\n    </Overlay>\n  )\n}\n\nexport default withRouter(withApollo(SelectCharacterOverlay));\n","import { Button, FormHelperText, TextField } from '@material-ui/core';\nimport React, { ChangeEvent, FC, useState } from 'react';\nimport { Mutation, Query } from 'react-apollo';\n\nimport Overlay from '.';\nimport { hideOverlay } from '../../context/actions';\nimport { useOverlayContext } from '../../context/OverlaysContext';\nimport { User } from '../../models';\nimport {\n  GET_USER_BY_EMAIL,\n  GetUserByEmailQueryVariables,\n  INSERT_NEW_USER,\n  InsertNewUserMutationVariables,\n} from '../../queries';\nimport { setUser } from '../../services';\nimport OverlayWidget from './OverlayWidget';\n\nenum InputField {\n  USERNAME = 'username',\n  EMAIL = 'email',\n  PASSWORD = 'password',\n}\n\nclass UsersQuery extends Query<{users: User[]}, GetUserByEmailQueryVariables>{}\n\ninterface Data {\n  insert_users: {\n    returning: [User];\n  }\n}\n\nclass InsertUserMutation extends Mutation<Data, InsertNewUserMutationVariables>{}\n\nconst SignUpOverlay = () => {\n  const [inputValues, changeValue] = useState({\n    [InputField.EMAIL]: '',\n    [InputField.PASSWORD]: '',\n    [InputField.USERNAME]: '',\n  });\n  const [, dispatch] = useOverlayContext();\n\n  const handleChange = (inputName: InputField) => (event: ChangeEvent<HTMLInputElement>) => {\n    changeValue({ ...inputValues, [inputName]: event.currentTarget.value })\n  }\n\n  const [inputError, setInputError] = useState(false);\n\n  const inputIsEmpty = (field: InputField) => inputValues[field] === '';\n\n  const inputIsValid = () => inputValues[InputField.EMAIL] && inputValues[InputField.USERNAME] && inputValues[InputField.PASSWORD];\n  \n  return (\n    <Overlay>\n      <OverlayWidget\n        title=\"Регистрация\"\n        actions={\n          <UsersQuery query={GET_USER_BY_EMAIL} variables={{email: inputValues[InputField.EMAIL]}}>\n            {\n              ({data, error}) => (\n                <InsertUserMutation mutation={INSERT_NEW_USER} variables={{\n                  email: inputValues[InputField.EMAIL].toLocaleLowerCase(),\n                  username: inputValues[InputField.USERNAME],\n                  password: inputValues[InputField.PASSWORD],\n                }}>\n                  {\n                    (insertUser) => {\n                      return (\n                        <Button\n                          variant=\"contained\"\n                          color=\"primary\"\n                          fullWidth\n                          onClick={() => {\n                            if (inputIsValid()) {\n                              insertUser()\n                                .then((response) => {\n                                  if(response && response.data && response.data.insert_users.returning.length) {\n                                    setUser(response.data.insert_users.returning[0]);\n                                    dispatch(hideOverlay())\n                                  }\n                                });\n                            }\n                            setInputError(true);\n                          }}\n                          disabled={!!error || !!(data && data.users && data.users.length > 0)}\n                        >\n                          Зарегистрироваться\n                        </Button>\n                      )\n                    }\n                  }\n                </InsertUserMutation>\n              )\n            }\n          </UsersQuery>\n        }\n        content={\n          <UsersQuery query={GET_USER_BY_EMAIL} variables={{email: inputValues[InputField.EMAIL].toLocaleLowerCase()}}>\n            {\n              ({data, error}) => (\n                <form noValidate autoComplete=\"off\">\n                  <TextField\n                    required\n                    fullWidth\n                    autoFocus\n                    error={!!error || inputIsEmpty(InputField.USERNAME)}\n                    label={InputField.USERNAME}\n                    value={inputValues[InputField.USERNAME]}\n                    onChange={handleChange(InputField.USERNAME)}\n                    margin=\"normal\"\n                  />\n                  {\n                    inputError && inputIsEmpty(InputField.USERNAME)\n                      && <FormHelperText id=\"component-error-text\">Поле обязательно для заполнения</FormHelperText>\n                  }\n                  <TextField\n                    required\n                    fullWidth\n                    error={!!error || (data && data.users && data.users.length > 0) || inputIsEmpty(InputField.EMAIL)}\n                    label={InputField.EMAIL}\n                    value={inputValues[InputField.EMAIL]}\n                    onChange={handleChange(InputField.EMAIL)}\n                    margin=\"normal\"\n                  />\n                  {\n                    data && data.users && data.users.length > 0 \n                      && <FormHelperText id=\"component-error-text\">Пользователь с таким адресом уже существует</FormHelperText>\n                  }\n                  {\n                    inputError && inputIsEmpty(InputField.EMAIL)\n                      && <FormHelperText id=\"component-error-text\">Поле обязательно для заполнения</FormHelperText>\n                  }\n                  <TextField\n                    fullWidth\n                    required\n                    error={!!error || inputIsEmpty(InputField.PASSWORD)}\n                    label={InputField.PASSWORD}\n                    value={inputValues[InputField.PASSWORD]}\n                    onChange={handleChange(InputField.PASSWORD)}\n                    type=\"password\"\n                    margin=\"normal\"\n                  />\n                  {\n                    inputError && inputIsEmpty(InputField.PASSWORD)\n                      && <FormHelperText id=\"component-error-text\">Поле обязательно для заполнения</FormHelperText>\n                  }\n                </form>\n              )\n            }\n          </UsersQuery>\n        }\n      />\n    </Overlay>\n  )\n}\n\nexport default SignUpOverlay;\n","import { Button, Typography } from '@material-ui/core';\nimport React, { FC } from 'react';\nimport { Mutation } from 'react-apollo';\n\nimport Overlay from '.';\nimport { hideOverlay } from '../../context/actions';\nimport { useOverlayContext } from '../../context/OverlaysContext';\nimport { CharacterType, skillDescriptionMap, SkillStatus, SkillType, skillTypeMap, UserId } from '../../models';\nimport { UPDATE_SKILL_STATUS, UpdateSkillStatusMutationVariables } from '../../queries';\nimport OverlayWidget from './OverlayWidget';\n\nexport interface SkillOverlayProps {\n  character: CharacterType;\n  skillType: SkillType;\n  skillStatus: SkillStatus;\n  currentUserId: UserId;\n  isCreator: boolean;\n  isCharacterOwner: boolean;\n}\n\nclass UpdateSkillStatusMutation extends Mutation<any, UpdateSkillStatusMutationVariables>{ }\n\nconst SkillOverlay: FC<SkillOverlayProps> = ({ character, skillStatus, skillType, currentUserId, isCreator, isCharacterOwner }) => {\n  const [, dispatch] = useOverlayContext();\n  const handleButtonClick = (fn: any) => () => {\n    fn();\n    dispatch(hideOverlay())\n  }\n  return (\n    <Overlay>\n      <OverlayWidget\n        title={skillTypeMap[skillType]}\n        actions={\n          <UpdateSkillStatusMutation mutation={UPDATE_SKILL_STATUS(skillType)}>\n            {\n              (updateSkillStatus) => (\n                <React.Fragment>\n                  {\n                    skillStatus === SkillStatus.READY && isCharacterOwner && (\n                      <Button\n                        fullWidth\n                        onClick={handleButtonClick(() => updateSkillStatus({ variables: { userId: currentUserId, skillStatus: SkillStatus.USED } }))}\n                        variant=\"contained\"\n                        color=\"primary\"\n                      >\n                        Использовать\n                      </Button>\n                    )\n                  }\n                  {\n                    skillStatus === SkillStatus.USED && isCreator && (\n                      <Button\n                        fullWidth\n                        onClick={handleButtonClick(() => updateSkillStatus({ variables: { userId: currentUserId, skillStatus: SkillStatus.READY } }))}\n                        variant=\"outlined\"\n                        color=\"primary\"\n                      >\n                        Восстановить\n                      </Button>\n                    )\n                  }\n                </React.Fragment>\n              )\n            }\n          </UpdateSkillStatusMutation>\n        }\n        content={\n          <Typography>\n            {skillDescriptionMap[character][skillType]}\n          </Typography>\n        }\n      />\n    </Overlay>\n  )\n}\n\nexport default SkillOverlay\n","import React, { FC } from 'react';\nimport { Redirect, Route } from 'react-router';\n\nimport { getUser } from '../../services';\n\nconst AuthorizedRoute: FC<any> = ({component: RouteComponent, ...rest}) => {\n  const user = getUser();\n  return <Route {...rest} render={() => user ? <RouteComponent /> : < Redirect to=\"/login\"/>}/>\n}\n\nexport default AuthorizedRoute\n","import {\n  AppBar,\n  ClickAwayListener,\n  Grow,\n  IconButton,\n  MenuItem,\n  MenuList,\n  Paper,\n  Popper,\n  Toolbar,\n  Typography,\n} from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport React, { FC } from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport styled from 'styled-components';\n\nconst StyledToolbar = styled(Toolbar)`\n  justify-content: space-between;\n`;\n\nconst StyledAppBar = styled(AppBar)`\n  position: relative !important;\n`;\n\nconst Navbar: FC<RouteComponentProps> = ({history}) => {\n  const [open, toggleOpen] = React.useState(false);\n  const elementRef = React.useRef(null);\n\n  function handleClose(event: any) {\n    if ((elementRef as any).current.contains(event.target)) {\n      return;\n    }\n\n    toggleOpen(false);\n  }\n  return (\n    <StyledAppBar position=\"static\">\n      <StyledToolbar>\n        <Typography variant=\"h6\" color=\"inherit\">\n          Kekopolia\n        </Typography>\n        <div>\n          <IconButton\n            buttonRef={elementRef}\n            color=\"inherit\"\n            aria-label=\"Menu\"\n            onClick={() => toggleOpen(!open)}\n            aria-owns={open ? 'menu-list-grow' : undefined}\n            aria-haspopup=\"true\"\n          >\n            <MenuIcon />\n          </IconButton>\n          <Popper open={open} anchorEl={elementRef.current} transition>\n            {({ TransitionProps, placement }) => (\n                <Grow\n                  {...TransitionProps}\n                  style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\n                >\n                  <Paper>\n                    <ClickAwayListener onClickAway={handleClose}>\n                      <MenuList>\n                        <MenuItem onClick={handleClose}>Аккаунт</MenuItem>\n                        <MenuItem onClick={() => history.push('/')}>Выход</MenuItem>\n                      </MenuList>\n                    </ClickAwayListener>\n                  </Paper>\n                </Grow>\n              )}\n            </Popper>\n        </div>\n      </StyledToolbar>\n    </StyledAppBar>\n  )\n}\n\nexport default withRouter(Navbar)\n","import React, { FC } from 'react';\n\nimport Navbar from '../Navbar';\n\nconst PageLayout: FC = ({children}) => {\n  return (\n    <div>\n      <Navbar />\n      {children}\n    </div>\n  )\n}\n\nexport default PageLayout\n","import { CircularProgress } from '@material-ui/core';\nimport React, { Component } from 'react';\nimport { Query } from 'react-apollo';\nimport styled from 'styled-components';\n\nimport PageLayout from '../components/PageLayout';\nimport { convertActiveUser } from '../helpers/convertActiveUser';\nimport { ActiveUser, Game, UserId } from '../models';\nimport {\n  GET_ACTIVE_USERS,\n  GET_GAME_BY_ID,\n  GetActiveUsersData,\n  GetActiveUsersQueryVariables,\n  GetGameByIdQueryVariables,\n  PLAYERS_SUBSCRIPTION,\n} from '../queries';\nimport { getUser } from '../services';\n\nexport interface Params {\n  currentUserId: UserId;\n  users: ActiveUser[];\n  game: Game;\n  subscribeToPlayers: any;\n}\n\nconst StyledLoadingContainer = styled.div`\n  width: 100%;\n  text-align: center;\n  margin: 1.5em auto;\n`;\n\ninterface Props {\n  children: (props: Params) => React.ReactNode;\n}\n\nclass GameQuery extends Query<{games: [Game]}, GetGameByIdQueryVariables>{}\nclass UsersQuery extends Query<GetActiveUsersData, GetActiveUsersQueryVariables>{}\n\nexport default class UserAndGame extends Component<Props> {\n\n  render() {\n    const user = getUser()!;\n    return (\n      <PageLayout>\n        <GameQuery query={GET_GAME_BY_ID} variables={{gameId: user.active_game}}>\n          {\n            ({data: gameData, loading}) => !loading && gameData ? (\n              <UsersQuery query={GET_ACTIVE_USERS} variables={{gameId: gameData.games[0].id }} >\n                {\n                  ({data: usersData, loading: usersLoading, subscribeToMore}) => {\n                    if (!usersLoading && usersData) {\n                      return this.props.children({\n                        currentUserId: user.id,\n                        users: convertActiveUser(usersData.players),\n                        game: gameData.games[0],\n                        subscribeToPlayers: () => subscribeToMore({\n                          document: PLAYERS_SUBSCRIPTION,\n                          variables: {gameId: gameData.games[0].id },\n                          updateQuery: (prev, {subscriptionData: {data}}) => {\n                            return data || prev;\n                          },\n                        }),\n                      })\n                    }\n                    return <StyledLoadingContainer><CircularProgress/></StyledLoadingContainer>;\n                  }\n                }\n              </UsersQuery>\n            ) : <StyledLoadingContainer><CircularProgress/></StyledLoadingContainer>\n          }\n        </GameQuery>\n      </PageLayout>\n    )\n  }\n}\n","import { ActiveUser } from '../models';\nimport { PlayerRelation } from '../queries';\n\nexport const convertActiveUser = (players: PlayerRelation[]): ActiveUser[] => {\n  return players.map(({game_id, user: {active_game, character, ...restUser}, user_id, ...player}) => ({...player, ...restUser, character: character!}))\n}","import { Button, Step, StepContent, StepLabel, Stepper, Typography } from '@material-ui/core';\nimport React, { useEffect } from 'react';\nimport styled from 'styled-components';\n\nimport Confetti from '../../components/Confetti';\nimport { DEFAULT_MAP_HEIGHT_PX, FOOTER_HEIGHT_PX, HEADER_HEIGHT_PX } from '../../constants/styles';\nimport { showOverlay } from '../../context/actions';\nimport { useOverlayContext } from '../../context/OverlaysContext';\nimport { useWindowSize } from '../../helpers/useWindowSize';\nimport { OverlayKey } from '../../models/overlays';\n\nfunction getSteps() {\n  return ['Мартинез', 'Гадкий кайот', 'Бар Х'];\n}\n\nfunction getStepContent(step: number) {\n  switch (step) {\n    case 0:\n      return `Адрес Бара.`;\n    case 1:\n      return 'Адрес Бара.';\n    case 2:\n      return `Адрес Бара.`;\n    default:\n      return 'Неизвестный бар.';\n  }\n}\n\ninterface StyledContainerProps {\n  height?: number;\n}\n\nconst StepContainer = styled.div`\n  overflow: auto;\n  height: ${({height}: StyledContainerProps) => height}px;\n  padding: 0 2em;\n  margin-top: 1em;\n`;\n\nconst StyledBarAddress = styled(Typography)`\n  margin-bottom: 1.5em !important;\n  margin-top: 1.5em !important;\n`\n\nconst calculateContainerHeight = () => {\n  return useWindowSize().height - DEFAULT_MAP_HEIGHT_PX - HEADER_HEIGHT_PX - FOOTER_HEIGHT_PX;\n}\n\nconst BarStepsWidget = () => {\n  const [activeStep, setActiveStep] = React.useState(0);\n  const [containerHeight, setHeight] = React.useState(calculateContainerHeight());\n  const [, dispatch] = useOverlayContext()\n  useEffect(() => {\n    window.addEventListener('resize', () => setHeight(calculateContainerHeight()))\n  })\n  const steps = getSteps();\n\n  function handleNext() {\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  }\n\n  function handleBack() {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  }\n\n  function handleWin() {\n    return dispatch(showOverlay(OverlayKey.GAME_COMPLETED))\n  }\n\n  return (\n    <StepContainer height={containerHeight}>\n      <Stepper activeStep={activeStep} orientation=\"vertical\">\n        {steps.map((title, index) => (\n          <Step key={title}>\n            <StepLabel>{title}</StepLabel>\n              <StepContent>\n                <StyledBarAddress>{getStepContent(index)}</StyledBarAddress>\n                <Button onClick={handleBack}>\n                  Назад\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={index === steps.length - 1 ? handleWin : handleNext}\n                >\n                  {index === steps.length - 1 ? 'Все!' : 'Дальше!'}\n                </Button>\n              </StepContent>\n          </Step>\n        ))}\n      </Stepper>\n      {activeStep === steps.length && (\n        <React.Fragment>\n          <Confetti />\n        </React.Fragment>\n      )}\n    </StepContainer>\n  );\n}\n\nexport default BarStepsWidget;\n","import React, { Component, FC, useEffect, useState } from 'react';\nimport ReactMapGL, { GeolocateControl, ViewState } from 'react-map-gl';\nimport styled from 'styled-components';\n\nimport { REACT_APP_MAP_BOX_TOKEN } from '../../config';\nimport { DEFAULT_MAP_HEIGHT_PX } from '../../constants/styles';\nimport { useWindowSize } from '../../helpers/useWindowSize';\n\nconst StyledGeolocationControls = styled(GeolocateControl)`\n  background-color: transparent !important;\n  box-shadow: none !important;\n  > button {\n    background-color: transparent !important;\n  }\n`;\n\nconst initialLocation: ViewState = {\n  latitude: 55.751244,\n  longitude: 37.618423,\n  zoom: 10\n};\n\ninterface Props {\n  disableTabSwipe: (disable: boolean) => void;\n}\n\ninterface StyledProps {\n  width: number;\n}\n\nconst StyledMapContainer = styled.div`\n  width: ${({width}: StyledProps) => width}px;\n`;\n\nconst Map: FC<Props> = ({disableTabSwipe}) => {\n  const [viewport, handleViewportChange] = useState<ViewState>(initialLocation)\n  const [componentWidth, setWidth] = React.useState(useWindowSize().width);\n  useEffect(() => {\n    window.addEventListener('resize', () => {console.log('resize', useWindowSize().width); setWidth(useWindowSize().width)})\n})\n\n  return (\n    <StyledMapContainer width={componentWidth}>\n      <ReactMapGL\n        width={componentWidth}\n        height={DEFAULT_MAP_HEIGHT_PX}\n        {...viewport}\n        onTouchStart={() => disableTabSwipe(true)}\n        onTouchEnd={() => disableTabSwipe(false)}\n        mapboxApiAccessToken={REACT_APP_MAP_BOX_TOKEN}\n        onViewportChange={(viewport) => handleViewportChange(viewport)}\n      >\n        <StyledGeolocationControls\n          key=\"geolocation\"\n          onViewportChange={(viewport) => handleViewportChange(viewport)}\n          positionOptions={{enableHighAccuracy: false}}\n          trackUserLocation\n        />\n      </ReactMapGL>\n    </StyledMapContainer>\n  );\n}\n\nexport default Map;","export const GRAPHQL_ENDPOINT = 'https://kekopolia.herokuapp.com/v1alpha1/graphql';\nexport const WS_GRAPHQL_ENDPOINT = 'wss://kekopolia.herokuapp.com/v1alpha1/graphql';\nexport const REACT_APP_MAP_BOX_TOKEN=\"pk.eyJ1IjoiY29va2llaHVudGVyIiwiYSI6ImNqdWlybGxtYjE5cDg0NHFqOGUxcWhyN3AifQ.CE4WlkrEVNSum38l0dGtmg\"\nexport const BASE_URL = process.env.NODE_ENV === 'development' ? '/' : '/the-bachelor-game';","import React from 'react';\n\nimport BarStepsWidget from '../BarStepsWidget';\nimport Map from '../Map';\n\ninterface Props {\n  disableTabSwipe: (disable: boolean) => void;\n}\n\nconst BarPage = ({disableTabSwipe}: Props) => {\n  return (\n    <React.Fragment>\n      <Map disableTabSwipe={disableTabSwipe}/>\n      <BarStepsWidget />\n    </React.Fragment>\n  );\n}\n\nexport default BarPage;\n","import { Grid, Typography } from '@material-ui/core';\nimport React, { FC } from 'react';\nimport styled from 'styled-components';\n\nimport { characterTitleMap, CharacterType } from '../../models';\n\nconst StyledContainer = styled(Grid)`\n`;\n\nconst StyledUsername = styled(Typography)`\n  width: 7em;\n  font-size: 1.2em !important;\n  font-weight: 600 !important;\n`;\n\ninterface Props {\n  username: string;\n  character: CharacterType;\n}\n\nconst PlayerInfo: FC<Props> = ({username, character}) => {\n  return (\n    <StyledContainer container>\n      <StyledUsername>{username}</StyledUsername>\n      <Typography>{characterTitleMap[character]}</Typography>\n    </StyledContainer>\n  )\n}\n\nexport default PlayerInfo\n","import { Avatar } from '@material-ui/core';\nimport React, { FC } from 'react';\nimport styled from 'styled-components';\n\nimport { SkillStatus } from '../../models';\n\ninterface StyledProps {\n  skillstatus: SkillStatus;\n}\n\nconst StyledSkill = styled(Avatar)`\n  background-color: greenyellow !important;\n  width: 1.6em !important;\n  height: 1.6em !important;\n  font-size: 1.6em !important;\n  margin-right: 0.5em;\n  filter: ${({skillstatus}: StyledProps) => skillstatus === SkillStatus.USED ? 'brightness(80%)' : 'brightness(100%)'};\n  cursor: pointer;\n`\n\ninterface Props {\n  skillStatus: SkillStatus;\n  onClick: () => void;\n}\n\nconst SkillIcon: FC<Props> = ({children, skillStatus, onClick}) => {\n  return (\n    <StyledSkill skillstatus={skillStatus} onClick={onClick}>{children}</StyledSkill>\n  )\n}\n\nexport default SkillIcon\n","import { Grid } from '@material-ui/core';\nimport React, { FC } from 'react';\nimport styled from 'styled-components';\n\nimport SkillIcon from '../../components/SkillIcon';\nimport { ActiveUser, SkillType } from '../../models';\n\nconst StyledContainer = styled(Grid)`\n  margin-top: 1em;\n`;\n\ninterface Props {\n  user: ActiveUser;\n  onSkillClick: (skillType: SkillType) => void;\n}\n\nconst SkillsContainer: FC<Props> = ({user, onSkillClick}) => {\n  return (\n    <StyledContainer container>\n      <SkillIcon onClick={() => onSkillClick(SkillType.ATTACK)} skillStatus={user.attack}>\n        A\n      </SkillIcon>\n      <SkillIcon onClick={() => onSkillClick(SkillType.DEFENCE)} skillStatus={user.defence}>\n        B\n      </SkillIcon>\n      <SkillIcon onClick={() => onSkillClick(SkillType.ARTEFACT)} skillStatus={user.artefact}>\n        C\n      </SkillIcon>\n    </StyledContainer>\n  )\n}\n\nexport default SkillsContainer\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"desc\", null, \"Created with getavataaars.com\");\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"circle\", {\n  id: \"path-1\",\n  cx: 120,\n  cy: 120,\n  r: 120\n}), React.createElement(\"path\", {\n  d: \"M12,160 C12,226.27417 65.72583,280 132,280 C198.27417,280 252,226.27417 252,160 L264,160 L264,-1.42108547e-14 L-3.19744231e-14,-1.42108547e-14 L-3.19744231e-14,160 L12,160 Z\",\n  id: \"path-3\"\n}), React.createElement(\"path\", {\n  d: \"M124,144.610951 L124,163 L128,163 L128,163 C167.764502,163 200,195.235498 200,235 L200,244 L0,244 L0,235 C-4.86974701e-15,195.235498 32.235498,163 72,163 L72,163 L76,163 L76,144.610951 C58.7626345,136.422372 46.3722246,119.687011 44.3051388,99.8812385 C38.4803105,99.0577866 34,94.0521096 34,88 L34,74 C34,68.0540074 38.3245733,63.1180731 44,62.1659169 L44,56 L44,56 C44,25.072054 69.072054,5.68137151e-15 100,0 L100,0 L100,0 C130.927946,-5.68137151e-15 156,25.072054 156,56 L156,62.1659169 C161.675427,63.1180731 166,68.0540074 166,74 L166,88 C166,94.0521096 161.51969,99.0577866 155.694861,99.8812385 C153.627775,119.687011 141.237365,136.422372 124,144.610951 Z\",\n  id: \"path-5\"\n}));\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"Avataaar\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"g\", {\n  transform: \"translate(-825.000000, -1100.000000)\",\n  id: \"Avataaar/Circle\"\n}, React.createElement(\"g\", {\n  transform: \"translate(825.000000, 1100.000000)\"\n}, React.createElement(\"g\", {\n  id: \"Circle\",\n  strokeWidth: 1,\n  fillRule: \"evenodd\",\n  transform: \"translate(12.000000, 40.000000)\"\n}, React.createElement(\"mask\", {\n  id: \"mask-2\",\n  fill: \"white\"\n}, React.createElement(\"use\", {\n  xlinkHref: \"#path-1\"\n})), React.createElement(\"use\", {\n  id: \"Circle-Background\",\n  fill: \"#E6E6E6\",\n  xlinkHref: \"#path-1\"\n}), React.createElement(\"g\", {\n  id: \"Color/Palette/Blue-01\",\n  mask: \"url(#mask-2)\",\n  fill: \"#65C9FF\"\n}, React.createElement(\"rect\", {\n  id: \"\\\\uD83D\\\\uDD8DColor\",\n  x: 0,\n  y: 0,\n  width: 240,\n  height: 240\n}))), React.createElement(\"mask\", {\n  id: \"mask-4\",\n  fill: \"white\"\n}, React.createElement(\"use\", {\n  xlinkHref: \"#path-3\"\n})), React.createElement(\"g\", {\n  id: \"Mask\"\n}), React.createElement(\"g\", {\n  id: \"Avataaar\",\n  strokeWidth: 1,\n  fillRule: \"evenodd\",\n  mask: \"url(#mask-4)\"\n}, React.createElement(\"g\", {\n  id: \"Body\",\n  transform: \"translate(32.000000, 36.000000)\"\n}, React.createElement(\"mask\", {\n  id: \"mask-6\",\n  fill: \"white\"\n}, React.createElement(\"use\", {\n  xlinkHref: \"#path-5\"\n})), React.createElement(\"use\", {\n  fill: \"#D0C6AC\",\n  xlinkHref: \"#path-5\"\n}), React.createElement(\"g\", {\n  id: \"Skin/\\\\uD83D\\\\uDC76\\\\uD83C\\\\uDFFD-03-Brown\",\n  mask: \"url(#mask-6)\",\n  fill: \"#D08B5B\"\n}, React.createElement(\"g\", {\n  transform: \"translate(-32.000000, 0.000000)\",\n  id: \"Color\"\n}, React.createElement(\"rect\", {\n  x: 0,\n  y: 0,\n  width: 264,\n  height: 244\n}))), React.createElement(\"path\", {\n  d: \"M156,79 L156,102 C156,132.927946 130.927946,158 100,158 C69.072054,158 44,132.927946 44,102 L44,79 L44,94 C44,124.927946 69.072054,150 100,150 C130.927946,150 156,124.927946 156,94 L156,79 Z\",\n  id: \"Neck-Shadow\",\n  fillOpacity: 0.100000001,\n  fill: \"#000000\",\n  mask: \"url(#mask-6)\"\n})), React.createElement(\"g\", {\n  id: \"Clothing/Shirt-Crew-Neck\",\n  transform: \"translate(0.000000, 170.000000)\"\n}, React.createElement(\"defs\", null, React.createElement(\"path\", {\n  d: \"M165.960472,29.2949161 C202.936473,32.3249982 232,63.2942856 232,101.051724 L232,110 L32,110 L32,101.051724 C32,62.9525631 61.591985,31.7649812 99.0454063,29.2195264 C99.0152598,29.5931145 99,29.9692272 99,30.3476251 C99,42.2107177 113.998461,51.8276544 132.5,51.8276544 C151.001539,51.8276544 166,42.2107177 166,30.3476251 C166,29.9946691 165.986723,29.6437014 165.960472,29.2949161 Z\",\n  id: \"react-path-1\"\n})), React.createElement(\"mask\", {\n  id: \"react-mask-2\",\n  fill: \"white\"\n}, React.createElement(\"use\", {\n  xlinkHref: \"#react-path-1\"\n})), React.createElement(\"use\", {\n  id: \"Clothes\",\n  fill: \"#E6E6E6\",\n  fillRule: \"evenodd\",\n  xlinkHref: \"#react-path-1\"\n}), React.createElement(\"g\", {\n  id: \"Color/Palette/Gray-01\",\n  mask: \"url(#react-mask-2)\",\n  fillRule: \"evenodd\",\n  fill: \"#5199E4\"\n}, React.createElement(\"rect\", {\n  id: \"\\\\uD83D\\\\uDD8DColor\",\n  x: 0,\n  y: 0,\n  width: 264,\n  height: 110\n})), React.createElement(\"g\", {\n  id: \"Shadowy\",\n  opacity: 0.599999964,\n  strokeWidth: 1,\n  fillRule: \"evenodd\",\n  mask: \"url(#react-mask-2)\",\n  fillOpacity: 0.16,\n  fill: \"#000000\"\n}, React.createElement(\"g\", {\n  transform: \"translate(92.000000, 4.000000)\",\n  id: \"Hola-\\\\uD83D\\\\uDC4B\\\\uD83C\\\\uDFFC\"\n}, React.createElement(\"ellipse\", {\n  cx: 40.5,\n  cy: 27.8476251,\n  rx: 39.6351047,\n  ry: 26.9138272\n})))), React.createElement(\"g\", {\n  id: \"Face\",\n  transform: \"translate(76.000000, 82.000000)\",\n  fill: \"#000000\"\n}, React.createElement(\"g\", {\n  id: \"Mouth/Smile\",\n  transform: \"translate(2.000000, 52.000000)\"\n}, React.createElement(\"defs\", null, React.createElement(\"path\", {\n  d: \"M35.117844,15.1280772 C36.1757121,24.6198025 44.2259873,32 54,32 C63.8042055,32 71.8740075,24.574136 72.8917593,15.0400546 C72.9736685,14.272746 72.1167429,13 71.042767,13 C56.1487536,13 44.7379213,13 37.0868244,13 C36.0066168,13 35.0120058,14.1784435 35.117844,15.1280772 Z\",\n  id: \"react-path-3\"\n})), React.createElement(\"mask\", {\n  id: \"react-mask-4\",\n  fill: \"white\"\n}, React.createElement(\"use\", {\n  xlinkHref: \"#react-path-3\"\n})), React.createElement(\"use\", {\n  id: \"Mouth\",\n  fillOpacity: 0.699999988,\n  fill: \"#000000\",\n  fillRule: \"evenodd\",\n  xlinkHref: \"#react-path-3\"\n}), React.createElement(\"rect\", {\n  id: \"Teeth\",\n  fill: \"#FFFFFF\",\n  fillRule: \"evenodd\",\n  mask: \"url(#react-mask-4)\",\n  x: 39,\n  y: 2,\n  width: 31,\n  height: 16,\n  rx: 5\n}), React.createElement(\"g\", {\n  id: \"Tongue\",\n  strokeWidth: 1,\n  fillRule: \"evenodd\",\n  mask: \"url(#react-mask-4)\",\n  fill: \"#FF4F6D\"\n}, React.createElement(\"g\", {\n  transform: \"translate(38.000000, 24.000000)\"\n}, React.createElement(\"circle\", {\n  cx: 11,\n  cy: 11,\n  r: 11\n}), React.createElement(\"circle\", {\n  cx: 21,\n  cy: 11,\n  r: 11\n})))), React.createElement(\"g\", {\n  id: \"Nose/Default\",\n  transform: \"translate(28.000000, 40.000000)\",\n  fillOpacity: 0.16\n}, React.createElement(\"path\", {\n  d: \"M16,8 C16,12.418278 21.372583,16 28,16 L28,16 C34.627417,16 40,12.418278 40,8\",\n  id: \"Nose\"\n})), React.createElement(\"g\", {\n  id: \"Eyes/Side-\\\\uD83D\\\\uDE12\",\n  transform: \"translate(0.000000, 8.000000)\",\n  fillOpacity: 0.599999964\n}, React.createElement(\"path\", {\n  d: \"M27.2409577,20.3455337 C26.462715,21.3574913 26,22.6247092 26,24 C26,27.3137085 28.6862915,30 32,30 C35.3137085,30 38,27.3137085 38,24 C38,23.7097898 37.9793961,23.4243919 37.9395713,23.1451894 C37.9474218,22.9227843 37.9097825,22.6709538 37.8153518,22.4071242 C37.7703692,22.2814477 37.7221152,22.1572512 37.6706873,22.0345685 C37.3370199,21.0717264 36.7650456,20.2202109 36.0253277,19.550585 C33.898886,17.3173253 30.5064735,16 26.9975803,16 C22.1644225,16 18.006676,18.648508 16.1601674,22.4473116 C15.6201012,23.5583844 16.5467928,24.3002944 17.4375392,23.5716412 C19.8737584,21.5787519 23.2572061,20.3437884 26.9975803,20.3437884 C27.0788767,20.3437884 27.1600045,20.3443718 27.2409577,20.3455337 Z\",\n  id: \"Eye\"\n}), React.createElement(\"path\", {\n  d: \"M85.2409577,20.3455337 C84.462715,21.3574913 84,22.6247092 84,24 C84,27.3137085 86.6862915,30 90,30 C93.3137085,30 96,27.3137085 96,24 C96,23.7097898 95.9793961,23.4243919 95.9395713,23.1451894 C95.9474218,22.9227843 95.9097825,22.6709538 95.8153518,22.4071242 C95.7703692,22.2814477 95.7221152,22.1572512 95.6706873,22.0345685 C95.3370199,21.0717264 94.7650456,20.2202109 94.0253277,19.550585 C91.898886,17.3173253 88.5064735,16 84.9975803,16 C80.1644225,16 76.006676,18.648508 74.1601674,22.4473116 C73.6201012,23.5583844 74.5467928,24.3002944 75.4375392,23.5716412 C77.8737584,21.5787519 81.2572061,20.3437884 84.9975803,20.3437884 C85.0788767,20.3437884 85.1600045,20.3443718 85.2409577,20.3455337 Z\",\n  id: \"Eye\"\n})), React.createElement(\"g\", {\n  id: \"Eyebrow/Outline/Up-Down\",\n  fillOpacity: 0.599999964,\n  fillRule: \"nonzero\"\n}, React.createElement(\"path\", {\n  d: \"M15.5914402,14.1619718 C20.0874642,7.83556966 29.6031809,4.65350252 39.3473715,7.79575991 C40.3986323,8.13476518 41.5256656,7.55736801 41.8646708,6.50610724 C42.2036761,5.45484647 41.6262789,4.32781316 40.5750182,3.98880789 C29.1665516,0.309863172 17.8358054,4.09887835 12.3309495,11.8448183 C11.6910852,12.7451779 11.9022584,13.9937761 12.8026181,14.6336404 C13.7029777,15.2735046 14.9515759,15.0623314 15.5914402,14.1619718 Z\",\n  id: \"Eyebrow\"\n}), React.createElement(\"path\", {\n  d: \"M73.6376405,21.1577995 C77.5525501,15.6490895 88.2853148,12.56006 97.5304219,14.8304032 C98.6031199,15.0938282 99.6862617,14.4377829 99.9496867,13.3650849 C100.213112,12.2923868 99.5570664,11.2092451 98.4843684,10.9458201 C87.7477584,8.30920485 75.3194947,11.8862211 70.3771498,18.840646 C69.7372855,19.7410057 69.9484587,20.9896038 70.8488184,21.6294681 C71.749178,22.2693324 72.9977762,22.0581591 73.6376405,21.1577995 Z\",\n  id: \"Eyebrow\",\n  transform: \"translate(85.007549, 16.038421) scale(-1, 1) translate(-85.007549, -16.038421) \"\n}))), React.createElement(\"g\", {\n  id: \"Top\"\n}, React.createElement(\"defs\", null, React.createElement(\"rect\", {\n  id: \"react-path-20\",\n  x: 0,\n  y: 0,\n  width: 264,\n  height: 280\n}), React.createElement(\"path\", {\n  d: \"M120,54 L20,54 L20,155 C20,160.522847 15.5228475,165 10,165 C4.4771525,165 6.76353751e-16,160.522847 0,155 L0,54 L0,44 C-2.9759565e-15,19.699471 19.699471,4.46393476e-15 44,0 L96,0 C120.300529,-4.46393476e-15 140,19.699471 140,44 L140,54 L140,155 C140,160.522847 135.522847,165 130,165 C124.477153,165 120,160.522847 120,155 L120,54 Z\",\n  id: \"react-path-18\"\n}), React.createElement(\"filter\", {\n  x: \"-0.8%\",\n  y: \"-2.8%\",\n  width: \"101.7%\",\n  height: \"111.1%\",\n  filterUnits: \"objectBoundingBox\",\n  id: \"react-filter-15\"\n}, React.createElement(\"feOffset\", {\n  dx: 0,\n  dy: 2,\n  in: \"SourceAlpha\",\n  result: \"shadowOffsetOuter1\"\n}), React.createElement(\"feColorMatrix\", {\n  values: \"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.1 0\",\n  type: \"matrix\",\n  in: \"shadowOffsetOuter1\"\n})), React.createElement(\"rect\", {\n  id: \"react-path-19\",\n  x: 74,\n  y: 50,\n  width: 118,\n  height: 36,\n  rx: 8\n})), React.createElement(\"mask\", {\n  id: \"react-mask-16\",\n  fill: \"white\"\n}, React.createElement(\"use\", {\n  xlinkHref: \"#react-path-20\"\n})), React.createElement(\"g\", {\n  id: \"Mask\"\n}), React.createElement(\"g\", {\n  id: \"Top/Accessories/Winter-Hat-1\",\n  transform: \"translate(-1.000000, 0.000000)\"\n}, React.createElement(\"g\", {\n  id: \"hat\",\n  strokeWidth: 1,\n  fillRule: \"evenodd\",\n  transform: \"translate(63.000000, 20.000000)\"\n}, React.createElement(\"path\", {\n  d: \"M1,48 L23.6714286,48 L23.6714286,153.664286 C23.6714286,159.924828 18.5962564,165 12.3357143,165 C6.07517216,165 1,159.924828 1,153.664286 L1,48 Z M116.328571,48 L139,48 L139,153.664286 C139,159.924828 133.924828,165 127.664286,165 C121.403744,165 116.328571,159.924828 116.328571,153.664286 L116.328571,48 Z\",\n  id: \"inside\",\n  fill: \"#F4F4F4\"\n}), React.createElement(\"mask\", {\n  id: \"react-mask-17\",\n  fill: \"white\"\n}, React.createElement(\"use\", {\n  xlinkHref: \"#react-path-18\"\n})), React.createElement(\"use\", {\n  id: \"hat-mask\",\n  fill: \"#D8D8D8\",\n  xlinkHref: \"#react-path-18\"\n}), React.createElement(\"g\", {\n  id: \"Color/Palette/Gray-01\",\n  mask: \"url(#react-mask-17)\",\n  fillRule: \"evenodd\",\n  fill: \"#FF5C5C\"\n}, React.createElement(\"rect\", {\n  id: \"\\\\uD83D\\\\uDD8DColor\",\n  x: 0,\n  y: 0,\n  width: 264,\n  height: 280\n}))), React.createElement(\"g\", {\n  id: \"hat-front\"\n}, React.createElement(\"use\", {\n  fill: \"black\",\n  fillOpacity: 1,\n  filter: \"url(#react-path-19)\",\n  xlinkHref: \"#react-path-19\"\n}), React.createElement(\"use\", {\n  fill: \"#F4F4F4\",\n  fillRule: \"evenodd\",\n  xlinkHref: \"#react-path-19\"\n})), React.createElement(\"g\", {\n  id: \"Facial-Hair/Beard-Magestic\",\n  transform: \"translate(49.000000, 72.000000)\"\n}, React.createElement(\"defs\", null, React.createElement(\"path\", {\n  d: \"M65.1802189,77.7372986 C67.3631845,76.1045334 80.4065113,75.4786511 82.757829,74.0894494 C83.4916461,73.6553857 84.0610723,73.215719 84.4997781,72.7800074 C84.938814,73.215719 85.5085703,73.6553857 86.2423874,74.0894494 C88.593375,75.4786511 101.636702,76.1045334 103.819667,77.7372986 C106.030032,79.3908276 107.643571,83.1846831 107.466966,86.15095 C107.255041,89.7101408 103.361486,98.2028927 93.6723269,99.1811016 C91.5576925,96.8281927 88.2368647,95.3104528 84.4997781,95.3104528 C80.7633517,95.3104528 77.4421938,96.8281927 75.3275594,99.1811016 C65.6387308,98.2028927 61.7451757,89.7101408 61.5332501,86.15095 C61.3566455,83.1846831 62.9701849,79.3908276 65.1802189,77.7372986 M103.141638,94.9063813 C103.142958,94.9057221 103.144609,94.905063 103.145929,94.9047334 C103.144278,94.905063 103.142958,94.9057221 103.141638,94.9063813 M65.8453747,94.9014375 C65.8493359,94.9030855 65.8565982,94.9057221 65.8618798,94.9076997 C65.8565982,94.9057221 65.8509864,94.9034151 65.8453747,94.9014375 M144.86259,55.9853335 C144.47439,50.0303878 143.277769,44.1519058 142.233986,38.2862777 C141.952739,36.7072349 140.423706,26 139.734783,26 C139.502391,35.1094058 138.701893,44.0803858 137.669664,53.1393651 C137.361018,55.8475668 137.037848,58.5564277 136.825262,61.2741874 C136.653609,63.4695546 136.959614,66.1220564 136.427819,68.2455739 C135.749129,70.9524573 132.348087,73.4783984 129.702978,74.410795 C123.102915,76.7373371 117.597802,67.1077689 111.960977,64.2911336 C104.643272,60.6347152 92.0637391,59.7639895 84.5816434,64.5297918 C76.9361472,59.7639895 64.356614,60.6347152 57.0389092,64.2911336 C51.4024147,67.1077689 45.8969708,76.7373371 39.2972383,74.410795 C36.6521296,73.4783984 33.2504268,70.9524573 32.572397,68.2455739 C32.0402723,66.1220564 32.346277,63.4695546 32.174954,61.2741874 C31.9623682,58.5564277 31.6388681,55.8475668 31.3302226,53.1393651 C30.2983232,44.0803858 29.4974953,35.1094058 29.2654335,26 C28.5761802,26 27.0468169,36.7072349 26.7658999,38.2862777 C25.7221169,44.1519058 24.5258266,50.0303878 24.1376265,55.9853335 C23.738533,62.1047422 24.2148704,68.1674622 25.4695887,74.1632765 C26.0687242,77.0277016 26.7685407,79.8756475 27.518863,82.7041478 C28.352701,85.8467429 27.198994,91.9661516 27.5723395,95.1921317 C28.2787581,101.29572 31.1542781,113.199679 34.3833375,118.45096 C35.9440605,120.989096 37.7734867,122.573742 39.816489,124.619148 C41.7825775,126.58809 42.6038717,129.640049 44.7260985,131.73687 C48.6820428,135.645092 54.4456266,137.971304 60.3656788,138.543134 C65.6773527,143.050212 74.505605,146 84.4997781,146 C94.4946114,146 103.322534,143.050212 108.634538,138.543134 C114.55393,137.971304 120.317843,135.645092 124.274118,131.73687 C126.396015,129.640049 127.217309,126.58809 129.183727,124.619148 C131.2264,122.573742 133.055826,120.989096 134.616879,118.45096 C137.845608,113.199679 140.721458,101.29572 141.427547,95.1921317 C141.800892,91.9661516 140.647185,85.8467429 141.481353,82.7041478 C142.231676,79.8756475 142.931162,77.0277016 143.530628,74.1632765 C144.784686,68.1674622 145.261353,62.1047422 144.86259,55.9853335 Z\",\n  id: \"react-path-26\"\n})), React.createElement(\"mask\", {\n  id: \"react-mask-25\",\n  fill: \"white\"\n}, React.createElement(\"use\", {\n  xlinkHref: \"#react-path-26\"\n})), React.createElement(\"use\", {\n  id: \"Glorious-Beard\",\n  fill: \"#5E7AA9\",\n  fillRule: \"evenodd\",\n  xlinkHref: \"#react-path-26\"\n}), React.createElement(\"g\", {\n  id: \"Color/Hair/Brown\",\n  mask: \"url(#react-mask-25)\",\n  fill: \"#D6B370\"\n}, React.createElement(\"g\", {\n  transform: \"translate(-32.000000, 0.000000)\",\n  id: \"Color\"\n}, React.createElement(\"rect\", {\n  x: 0,\n  y: 0,\n  width: 264,\n  height: 244\n})))), React.createElement(\"g\", {\n  id: \"Top/_Resources/Prescription-01\",\n  fill: \"none\",\n  transform: \"translate(62.000000, 85.000000)\",\n  strokeWidth: 1\n}, React.createElement(\"defs\", null, React.createElement(\"filter\", {\n  x: \"-0.8%\",\n  y: \"-2.4%\",\n  width: \"101.5%\",\n  height: \"109.8%\",\n  filterUnits: \"objectBoundingBox\",\n  id: \"react-filter-24\"\n}, React.createElement(\"feOffset\", {\n  dx: 0,\n  dy: 2,\n  in: \"SourceAlpha\",\n  result: \"shadowOffsetOuter1\"\n}), React.createElement(\"feColorMatrix\", {\n  values: \"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.2 0\",\n  type: \"matrix\",\n  in: \"shadowOffsetOuter1\",\n  result: \"shadowMatrixOuter1\"\n}), React.createElement(\"feMerge\", null, React.createElement(\"feMergeNode\", {\n  in: \"shadowMatrixOuter1\"\n}), React.createElement(\"feMergeNode\", {\n  in: \"SourceGraphic\"\n})))), React.createElement(\"g\", {\n  id: \"Glasses\",\n  filter: \"url(#react-filter-24)\",\n  transform: \"translate(8.000000, 8.000000)\",\n  fill: \"#D6EAF2\"\n}, React.createElement(\"path\", {\n  d: \"M46.2491397,7.27516667 C48.6207695,7.2975 49.7419096,7.69183333 50.1459601,10.1651667 C50.5553446,12.6705 50.1572949,15.4871667 49.6852359,17.9548333 C48.9648125,21.7228333 47.7666627,25.4145 44.9776475,28.1685 C43.5084639,29.6188333 41.7165732,30.7748333 39.8106684,31.5641667 C38.7985419,31.9835 37.7297416,32.2861667 36.6612747,32.5158333 C36.3489024,32.5828333 33.6822357,32.9501667 35.3177735,32.7635 C31.5009631,33.1991667 27.3601122,33.1818333 24.1723805,30.7525 C20.6396056,28.0601667 18.2203032,23.7998333 17.1565036,19.5561667 C16.5340925,17.0731667 15.2262624,11.1345 17.6158944,9.14916667 C20.3532365,6.8745 46.2491397,7.27516667 46.2491397,7.27516667 L46.2491397,7.27516667 Z M22.2178029,0.4905 C16.7774562,0.677833333 13.1466691,1.63383333 10.4633337,7.06916667 C5.54571911,17.0301667 13.9627711,31.9688333 23.352278,36.0395 C34.3293166,40.7991667 46.5921826,35.5318333 52.3955746,26.0058333 C55.4689587,20.9621667 57.0224862,13.3231667 56.9224737,7.50383333 C56.7951245,0.0765 51.6071427,-0.1295 45.5090472,0.0338333333 L22.2178029,0.4905 Z\",\n  id: \"Frame-Stuff\"\n}), React.createElement(\"path\", {\n  d: \"M79.6805515,7.27256667 C77.3089217,7.29523333 76.1877816,7.68923333 75.7837311,10.1625667 C75.3743466,12.6679 75.7723963,15.4845667 76.244122,17.9522333 C76.9648787,21.7202333 78.1630285,25.4119 80.9520437,28.1659 C82.4212273,29.6162333 84.213118,30.7722333 86.1190228,31.5619 C87.1311493,31.9809 88.1999496,32.2835667 89.2684165,32.5132333 C89.5807888,32.5802333 92.2471221,32.9479 90.6119177,32.7609 C94.4287281,33.1965667 98.569579,33.1792333 101.757311,30.7499 C105.290086,28.0575667 107.709388,23.7975667 108.773188,19.5539 C109.395599,17.0705667 110.703095,11.1322333 108.313797,9.14656667 C105.576455,6.8719 79.6805515,7.27256667 79.6805515,7.27256667 L79.6805515,7.27256667 Z M103.711555,0.4879 C109.152235,0.675233333 112.783022,1.63156667 115.466357,7.06656667 C120.383639,17.0275667 111.96692,31.9662333 102.577413,36.0372333 C91.6003746,40.7965667 79.3375086,35.5292333 73.5337832,26.0035667 C70.4607325,20.9595667 68.907205,13.3205667 69.0068841,7.50123333 C69.1345667,0.0739 74.3225485,-0.1321 80.420644,0.0315666667 L103.711555,0.4879 Z\",\n  id: \"Frame-Stuff\"\n}), React.createElement(\"path\", {\n  d: \"M13.1969483,4.9267 C9.78501392,5.11836667 5.88606327,5.16436667 2.69005822,6.63936667 C-0.69461078,8.20136667 -1.2176675,11.7387 3.04920921,12.2260333 C4.97094906,12.4457 6.89488267,12.0827 8.78716336,11.7450333 C10.336903,11.4683667 12.4419791,11.5580333 13.9064752,10.9657 C16.6355213,9.86236667 16.4603333,4.74003333 13.1969483,4.9267\",\n  id: \"Frame-Stuff\"\n}), React.createElement(\"path\", {\n  d: \"M112.73467,4.9267 C116.146606,5.11836667 120.045559,5.16436667 123.241565,6.63936667 C126.626236,8.20136667 127.149293,11.7387 122.882414,12.2260333 C120.960673,12.4457 119.036739,12.0827 117.144457,11.7450333 C115.594717,11.4683667 113.489639,11.5580333 112.025143,10.9657 C109.295782,9.86236667 109.471283,4.74003333 112.73467,4.9267\",\n  id: \"Frame-Stuff\"\n}), React.createElement(\"path\", {\n  d: \"M73.1094302,7.01263333 C71.1631869,4.71263333 66.0912197,3.38463333 62.8914864,3.38463333 C59.6914198,3.38463333 54.7681378,4.71263333 52.8222279,7.01263333 C51.8407719,8.1723 51.8074344,9.72396667 53.5083137,10.4509667 C55.6262451,11.3566333 57.5174814,9.7143 59.2126933,8.8553 C61.3809643,7.75663333 64.7120473,7.8773 66.7189648,8.8553 C68.4271783,9.68796667 70.3050797,11.3566333 72.4233444,10.4509667 C74.1242237,9.72396667 74.0908862,8.1723 73.1094302,7.01263333\",\n  id: \"Frame-Stuff\"\n})))))))));\n\nvar SvgDummy = function SvgDummy(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: \"264px\",\n    height: \"280px\",\n    viewBox: \"0 0 264 280\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDummy, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/dummy.e95c9f5b.svg\";\nexport { ForwardRef as ReactComponent };","import { Avatar, Grid, Paper, Typography } from '@material-ui/core';\nimport React, { FC } from 'react';\nimport styled from 'styled-components';\n\nimport { SkillOverlayProps } from '../../containers/Overlay/SkillOverlay';\nimport PlayerInfo from '../../containers/PlayerInfo';\nimport SkillsContainer from '../../containers/SkillsContainer';\nimport { showOverlay } from '../../context/actions';\nimport { useOverlayContext } from '../../context/OverlaysContext';\nimport { ActiveUser, OverlayKey, SkillType } from '../../models';\nimport { ReactComponent as CharAvatar } from './avatars/dummy.svg';\n\nconst StyledAvatar = styled(Avatar)`\n  background-color: transparent !important;\n  width: 4em !important;\n  height: 4em !important;\n  cursor: pointer;\n`;\n\nconst StyledCard = styled(Paper)`\n  max-width: 30em;\n  padding: 0 1em;\n  min-height: 5.5em;\n  margin: 1.5em auto;\n`;\n\ninterface Props {\n  user: ActiveUser;\n  isCreator: boolean;\n  isCharacterOwner: boolean;\n}\n\nconst CharacterCard: FC<Props> = ({user, isCreator, isCharacterOwner}) => {\n  const [, dispatch] = useOverlayContext();\n  function onSkillClick(skillType: SkillType) {\n    const overlayProps: SkillOverlayProps = {\n      character: user.character,\n      currentUserId: user.id,\n      skillType,\n      skillStatus: user[skillType],\n      isCreator,\n      isCharacterOwner,\n    }\n    dispatch(showOverlay(OverlayKey.SKILL_DESCRIPTION, overlayProps))\n  }\n  return (\n    <StyledCard>\n      <Grid container wrap=\"nowrap\" spacing={16} alignContent=\"center\">\n        <Grid item>\n          <StyledAvatar\n            onClick={() => dispatch(showOverlay(OverlayKey.CHARACTER_DESCRIPTION, {character: user.character}))}\n          >\n            <CharAvatar />\n          </StyledAvatar>\n        </Grid>\n        <Grid item xs={8} zeroMinWidth>\n          \n          <PlayerInfo username={user.username} character={user.character!} />\n          <SkillsContainer user={user} onSkillClick={onSkillClick}/>\n        </Grid>\n        <Grid item zeroMinWidth>\n          <Typography align=\"right\">{user.score}</Typography>\n        </Grid>\n      </Grid>\n    </StyledCard>\n  )\n}\n\nexport default CharacterCard\n","import React, { FC } from 'react';\n\nimport CharacterCard from '../../components/CharacterCard';\nimport { ActiveUser, Game, UserId } from '../../models';\n\ninterface Props {\n  users: ActiveUser[];\n  game: Game;\n  currentUserId: UserId;\n  isCreator: boolean;\n}\n\nconst Characters: FC<Props> = ({users, game, isCreator, currentUserId}) => {\n  return (\n    <div>\n      {users.map(user => <CharacterCard key={user.id} user={user} isCreator={isCreator} isCharacterOwner={user.id === currentUserId} />)}\n    </div>\n  )\n}\n\nexport default Characters\n","import { Typography } from \"@material-ui/core\";\nimport React, { FC } from \"react\";\n\ninterface Props {\n  tabCount: number;\n}\n\nexport const TabContainer: FC<Props> = (props) => {\n  const { children, tabCount } = props;\n\n  return (\n    <Typography component=\"div\" style={{ padding: 8 * tabCount }}>\n      {children}\n    </Typography>\n  );\n}","import { BottomNavigation, BottomNavigationAction } from '@material-ui/core';\nimport FaceIcon from '@material-ui/icons/FaceRounded';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport React, { Component, useState } from 'react';\nimport SwipeableViews from 'react-swipeable-views';\nimport styled from 'styled-components';\n\nimport UserAndGame, { Params } from '../../renderProps/UserAndGame';\nimport BarPage from '../BarPage';\nimport Characters from '../Characters';\nimport { TabContainer } from './TabContainer';\n\nconst StyledBottomNavigation = styled(BottomNavigation)`\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n`;\n\ninterface Props extends Params {\n  tabIndex: number;\n  swipeDisabled: boolean;\n  disableTabSwipe: (disabled: boolean) => void;\n  handleTabIndexChange: (tabIndex: number) => void;\n}\n\nclass GameScreenWidget extends Component<Props, {}> {\n\n  public componentDidMount() {\n    this.props.subscribeToPlayers();\n  }\n\n  public render() {\n    const {swipeDisabled, tabIndex, subscribeToPlayers, disableTabSwipe, handleTabIndexChange, ...rest} = this.props;\n    const isCreator = rest.game.creator === rest.currentUserId;\n    return (\n      <React.Fragment>\n        <SwipeableViews\n          disabled={swipeDisabled}\n          index={tabIndex}\n          onChangeIndex={handleTabIndexChange}\n        >\n          <BarPage disableTabSwipe={disableTabSwipe}/>\n          <TabContainer tabCount={3}>\n            <Characters {...rest} isCreator={isCreator}/>\n          </TabContainer>\n          <TabContainer tabCount={3}>Item Three</TabContainer>\n        </SwipeableViews>\n        <StyledBottomNavigation\n          value={tabIndex}\n          onChange={(event, value) => handleTabIndexChange(value)}\n          showLabels\n        >\n          <BottomNavigationAction label=\"Карта\" icon={<LocationOnIcon />} />\n          <BottomNavigationAction label=\"Герои\" icon={<FaceIcon /> } />\n          <BottomNavigationAction label=\"Nearby\" icon={<LocationOnIcon />} />\n  \n        </StyledBottomNavigation>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default GameScreenWidget\n","import { BottomNavigation } from '@material-ui/core';\nimport React, { Component, useState } from 'react';\nimport styled from 'styled-components';\n\nimport UserAndGame, { Params } from '../../renderProps/UserAndGame';\nimport GameScreenWidget from './GameScreenWidget';\n\nconst StyledBottomNavigation = styled(BottomNavigation)`\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n`;\n\ninterface State {\n  tabIndex: number;\n  swipeDisabled: boolean;\n}\n\nclass GameScreen extends Component<{}, State> {\n\n  public state: State = {\n    tabIndex: 1,\n    swipeDisabled: false,\n  }\n\n  public render() {\n    return (\n      <UserAndGame>\n        {\n          (params: Params) => (\n            <GameScreenWidget\n              {...params}\n              {...this.state}\n              handleTabIndexChange={this.handleTabIndexChange}\n              disableTabSwipe={this.disableTabSwipe}\n            />\n          )\n        }\n      </UserAndGame>\n    )\n  }\n\n  private handleTabIndexChange = (tabIndex: number) => {\n    this.setState({tabIndex})\n  }\n\n  private disableTabSwipe = (disabled: boolean) => {\n    this.setState({swipeDisabled: disabled})\n  }\n}\n\nexport default GameScreen\n","import Button from '@material-ui/core/Button';\nimport React, { FC, useEffect } from 'react';\nimport { Query } from 'react-apollo';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport styled from 'styled-components';\n\nimport { showOverlay } from '../../context/actions';\nimport { useOverlayContext } from '../../context/OverlaysContext';\nimport { Game, OverlayKey } from '../../models';\nimport { GET_GAME_BY_ID, GetGameByIdQueryVariables } from '../../queries';\nimport { getUser } from '../../services';\nimport { gamePath } from '../Routes/paths';\n\nconst StyledButton = styled(Button)`\n  display: block !important;\n  margin: 1em auto !important;\n  min-width: 12em !important;\n`;\n\ninterface Props {\n  loginRequired?: boolean;\n}\n\nclass GameQuery extends Query<{games: [Game]}, GetGameByIdQueryVariables>{}\n\nconst Main: FC<RouteComponentProps & Props> = ({history, loginRequired}) => {\n  const [, dispatch] = useOverlayContext()\n  const user = getUser();\n\n  useEffect(() => loginRequired ? dispatch(showOverlay(OverlayKey.LOGIN)) : undefined);\n\n  function handleJoinGameClick(games?: [Game]) {\n    if (user) {\n      if (user.character && games && games.length) {\n        history.push(gamePath(games[0].title))\n      } else {\n        dispatch(showOverlay(OverlayKey.JOIN_GAME))\n      }\n    } else {\n      dispatch(showOverlay(OverlayKey.LOGIN))\n    }\n  }\n  \n  return (\n    <div className=\"App\">\n      <p>\n          Welcome to Kekopolia!\n      </p>\n      <GameQuery query={GET_GAME_BY_ID} variables={{gameId: user && user.active_game}}>\n        {\n          ({data, loading}) => (\n            <React.Fragment>\n              <StyledButton\n                disabled={loading}\n                onClick={() => handleJoinGameClick(data && data.games)} variant=\"outlined\" color=\"primary\">Присоединиться</StyledButton>\n              <StyledButton onClick={() => dispatch(showOverlay(OverlayKey.LOGIN))} variant=\"outlined\" color=\"secondary\">Новая игра</StyledButton>\n            </React.Fragment>\n          )\n        }\n      </GameQuery>\n    </div>\n  );\n}\n\nexport default withRouter(Main)\n","import React from 'react';\nimport { Route, Switch } from 'react-router';\n\nimport AuthorizedRoute from '../AuthorizedRoute';\nimport GameScreen from '../GameScreen';\nimport Main from '../MainView/Main';\n\nconst Routes = () => {\n  return (\n    <Switch>\n      <Route exact path=\"/\" component={Main} />\n      <Route exact path=\"/login\" render={() => <Main loginRequired/>} />\n      <AuthorizedRoute path=\"/game/:gameId\" component={GameScreen} />\n    </Switch>\n  )\n}\n\nexport default Routes\n","import './App.css';\n\nimport React, { ComponentType } from 'react';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport Confetti from './components/Confetti';\nimport { BASE_URL } from './config';\nimport CharacterDescriptionOverlay from './containers/Overlay/CharacterDescriptionOverlay';\nimport GameCompletedOverlay from './containers/Overlay/GameCompletedOverlay';\nimport JoinGameOverlay from './containers/Overlay/JoinGameOverlay';\nimport LoginOverlay from './containers/Overlay/LoginOverlay';\nimport SelectCharacterOverlay from './containers/Overlay/SelectCharacterOverlay';\nimport SignUpOverlay from './containers/Overlay/SignUpOverlay';\nimport SkillOverlay from './containers/Overlay/SkillOverlay';\nimport Routes from './containers/Routes';\nimport { useOverlayContext } from './context/OverlaysContext';\nimport { OverlayKey } from './models/overlays';\n\ninterface OverlayMapping {\n  [overlayKey: string]: ComponentType<any>;\n}\n\nconst overlayMap: OverlayMapping = {\n  [OverlayKey.GAME_COMPLETED]: GameCompletedOverlay,\n  [OverlayKey.JOIN_GAME]: JoinGameOverlay,\n  [OverlayKey.SELECT_CHARACTER]: SelectCharacterOverlay,\n  [OverlayKey.LOGIN]: LoginOverlay,\n  [OverlayKey.SIGN_UP]: SignUpOverlay,\n  [OverlayKey.CHARACTER_DESCRIPTION]: CharacterDescriptionOverlay,\n  [OverlayKey.SKILL_DESCRIPTION]: SkillOverlay,\n}\n\nconst App = () => {\n  const [{overlay, props}] = useOverlayContext()\n  const OverlayComponent = overlay && overlayMap[overlay];\n  return (\n    <BrowserRouter basename={BASE_URL}>\n      <Routes />\n      {\n        OverlayComponent && <OverlayComponent {...props}/>\n      }\n      {\n        overlay === OverlayKey.GAME_COMPLETED ? <Confetti /> : undefined\n      }\n    </BrowserRouter>\n  )\n}\n\nexport default App;\n","import { HttpLink, InMemoryCache, split } from 'apollo-boost';\nimport ApolloClient from 'apollo-client';\nimport { WebSocketLink } from 'apollo-link-ws';\nimport { getMainDefinition } from 'apollo-utilities';\n\nimport { GRAPHQL_ENDPOINT, WS_GRAPHQL_ENDPOINT } from '../config';\n\nconst httpLink = new HttpLink({\n  uri: GRAPHQL_ENDPOINT,\n});\n\nconst wsLink = new WebSocketLink({\n  uri: WS_GRAPHQL_ENDPOINT,\n  options: {\n    reconnect: true\n  }\n});\n\nconst link = split(\n  // split based on operation type\n  ({ query }) => {\n    const { kind, operation } = getMainDefinition(query);\n    return kind === 'OperationDefinition' && operation === 'subscription';\n  },\n  wsLink,\n  httpLink,\n);\n\nexport const client = new ApolloClient({\n  link,\n  cache: new InMemoryCache(),\n});","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import './index.css';\n\nimport React from 'react';\nimport { ApolloProvider } from 'react-apollo';\nimport { ApolloProvider as ApolloProviderHooks } from 'react-apollo-hooks';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport { client } from './client';\nimport { OverlayProvider } from './context/OverlaysContext';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render((\n  <ApolloProviderHooks client={client}>\n    <ApolloProvider client={client}>\n      <OverlayProvider>\n        <App />\n      </OverlayProvider>\n    </ApolloProvider>\n  </ApolloProviderHooks>\n  ), document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}